!function(a,b,c){"undefined"!=typeof module?module.exports=c(a,b):"function"==typeof define&&"object"==typeof define.amd?define(c):b[a]=c(a,b)}("bean",this,function(a,b){var c=window,d=b[a],e=/over|out/,f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,h="addEventListener",i="attachEvent",j="removeEventListener",k="detachEvent",l=document||{},m=l.documentElement||{},n=m[h],o=n?h:i,p=Array.prototype.slice,q=/click|mouse|menu|drag|drop/i,r=/^touch|^gesture/i,s={one:1},t=function(a,b,c){for(c=0;c<b.length;c++)a[b[c]]=1;return a}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(n?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),u=function(){function a(a,b){for(;null!==(b=b.parentNode);)if(b===a)return!0;return!1}function b(b){var c=b.relatedTarget;return c?c!==this&&"xul"!==c.prefix&&!/document/.test(this.toString())&&!a(this,c):null===c}return{mouseenter:{base:"mouseover",condition:b},mouseleave:{base:"mouseout",condition:b},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),v=function(){var a="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),b=a.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),c=a.concat("char charCode key keyCode".split(" ")),d=a.concat("touches targetTouches changedTouches scale rotation".split(" ")),f="preventDefault",g=function(a){return function(){a[f]?a[f]():a.returnValue=!1}},h="stopPropagation",i=function(a){return function(){a[h]?a[h]():a.cancelBubble=!0}},j=function(a){return function(){a[f](),a[h](),a.stopped=!0}},k=function(a,b,c){var d,e;for(d=c.length;d--;)e=c[d],!(e in b)&&e in a&&(b[e]=a[e])};return function(n,o){var p={originalEvent:n,isNative:o};if(!n)return p;var s,t=n.type,u=n.target||n.srcElement;return p[f]=g(n),p[h]=i(n),p.stop=j(p),p.target=u&&3===u.nodeType?u.parentNode:u,o&&(-1!==t.indexOf("key")?(s=c,p.keyCode=n.which||n.keyCode):q.test(t)?(s=b,p.rightClick=3===n.which||2===n.button,p.pos={x:0,y:0},n.pageX||n.pageY?(p.clientX=n.pageX,p.clientY=n.pageY):(n.clientX||n.clientY)&&(p.clientX=n.clientX+l.body.scrollLeft+m.scrollLeft,p.clientY=n.clientY+l.body.scrollTop+m.scrollTop),e.test(t)&&(p.relatedTarget=n.relatedTarget||n[("mouseover"===t?"from":"to")+"Element"])):r.test(t)&&(s=d),k(n,p,s||a)),p}}(),w=function(a,b){return n||b||a!==l&&a!==c?a:m},x=function(){function a(a,b,c,d,e){this.element=a,this.type=b,this.handler=c,this.original=d,this.namespaces=e,this.custom=u[b],this.isNative=t[b]&&a[o],this.eventType=n||this.isNative?b:"propertychange",this.customType=!n&&!this.isNative&&b,this.target=w(a,this.isNative),this.eventSupport=this.target[o]}return a.prototype={inNamespaces:function(a){var b,c;if(!a)return!0;if(!this.namespaces)return!1;for(b=a.length;b--;)for(c=this.namespaces.length;c--;)if(a[b]===this.namespaces[c])return!0;return!1},matches:function(a,b,c){return!(this.element!==a||b&&this.original!==b||c&&this.handler!==c)}},a}(),y=function(){var a={},b=function(c,d,e,f,g){if(d&&"*"!==d){var h,i=0,j=a["$"+d],k="*"===c;if(!j)return;for(h=j.length;h>i;i++)if((k||j[i].matches(c,e,f))&&!g(j[i],j,i,d))return}else for(var l in a)"$"===l.charAt(0)&&b(c,l.substr(1),e,f,g)},c=function(b,c,d){var e,f=a["$"+c];if(f)for(e=f.length;e--;)if(f[e].matches(b,d,null))return!0;return!1},d=function(a,c,d){var e=[];return b(a,c,d,null,function(a){return e.push(a)}),e},e=function(b){return(a["$"+b.type]||(a["$"+b.type]=[])).push(b),b},f=function(c){b(c.element,c.type,null,c.handler,function(b,c,d){return c.splice(d,1),0===c.length&&delete a["$"+b.type],!1})},g=function(){var b,c=[];for(b in a)"$"===b.charAt(0)&&(c=c.concat(a[b]));return c};return{has:c,get:d,put:e,del:f,entries:g}}(),z=n?function(a,b,c,d){a[d?h:j](b,c,!1)}:function(a,b,c,d,e){e&&d&&null===a["_on"+e]&&(a["_on"+e]=0),a[d?i:k]("on"+b,c)},A=function(a,b,d){return function(e){return e=v(e||((this.ownerDocument||this.document||this).parentWindow||c).event,!0),b.apply(a,[e].concat(d))}},B=function(a,b,d,e,f,g){return function(h){(e?e.apply(this,arguments):n?!0:h&&h.propertyName==="_on"+d||!h)&&(h&&(h=v(h||((this.ownerDocument||this.document||this).parentWindow||c).event,g)),b.apply(a,!h||f&&0!==f.length?p.call(arguments,h?0:1).concat(f):arguments))}},C=function(a,b,c,d,e){return function(){a(b,c,e),d.apply(this,arguments)}},D=function(a,b,c,d){var e,f,h,i=b&&b.replace(g,""),j=y.get(a,i,c);for(e=0,f=j.length;f>e;e++)j[e].inNamespaces(d)&&((h=j[e]).eventSupport&&z(h.target,h.eventType,h.handler,!1,h.type),y.del(h))},E=function(a,b,c,d,e){var h,i=b.replace(g,""),j=b.replace(f,"").split(".");return y.has(a,i,c)?a:("unload"===i&&(c=C(D,a,i,c,d)),u[i]&&(u[i].condition&&(c=B(a,c,i,u[i].condition,!0)),i=u[i].base||i),h=y.put(new x(a,i,c,d,j[0]&&j)),h.handler=h.isNative?A(a,h.handler,e):B(a,h.handler,i,!1,e,!1),void(h.eventSupport&&z(h.target,h.eventType,h.handler,!0,h.customType)))},F=function(a,b,c){return function(d){var e,f,g="string"==typeof a?c(a,this):a;for(e=d.target;e&&e!==this;e=e.parentNode)for(f=g.length;f--;)if(g[f]===e)return b.apply(e,arguments)}},G=function(a,b,c){var d,e,h,i,j=D,k=b&&"string"==typeof b;if(k&&b.indexOf(" ")>0){for(b=b.split(" "),i=b.length;i--;)G(a,b[i],c);return a}if(e=k&&b.replace(g,""),e&&u[e]&&(e=u[e].type),!b||k)(h=k&&b.replace(f,""))&&(h=h.split(".")),j(a,e,c,h);else if("function"==typeof b)j(a,null,b);else for(d in b)b.hasOwnProperty(d)&&G(a,d,b[d]);return a},H=function(a,b,c,d,e){var f,g,h,i,j=c,k=c&&"string"==typeof c;if(b&&!c&&"object"==typeof b)for(f in b)b.hasOwnProperty(f)&&H.apply(this,[a,f,b[f]]);else for(i=arguments.length>3?p.call(arguments,3):[],g=(k?c:b).split(" "),k&&(c=F(b,j=d,e))&&(i=p.call(i,1)),this===s&&(c=C(G,a,b,c,j)),h=g.length;h--;)E(a,g[h],c,j,i);return a},I=function(){return H.apply(s,arguments)},J=n?function(a,b,d){var e=l.createEvent(a?"HTMLEvents":"UIEvents");e[a?"initEvent":"initUIEvent"](b,!0,!0,c,1),d.dispatchEvent(e)}:function(a,b,c){c=w(c,a),a?c.fireEvent("on"+b,l.createEventObject()):c["_on"+b]++},K=function(a,b,c){var d,e,h,i,j,k=b.split(" ");for(d=k.length;d--;)if(b=k[d].replace(g,""),(i=k[d].replace(f,""))&&(i=i.split(".")),i||c||!a[o])for(j=y.get(a,b),c=[!1].concat(c),e=0,h=j.length;h>e;e++)j[e].inNamespaces(i)&&j[e].handler.apply(a,c);else J(t[b],b,a);return a},L=function(a,b,c){for(var d=0,e=y.get(b,c),f=e.length;f>d;d++)e[d].original&&H(a,e[d].type,e[d].original);return a},M={add:H,one:I,remove:G,clone:L,fire:K,noConflict:function(){return b[a]=d,this}};if(c[i]){var N=function(){var a,b=y.entries();for(a in b)b[a].type&&"unload"!==b[a].type&&G(b[a].element,b[a].type);c[k]("onunload",N),c.CollectGarbage&&c.CollectGarbage()};c[i]("onunload",N)}return M}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};"undefined"!=typeof module&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.7";var x=w.each=w.forEach=function(a,b,d){if(null!=a)if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];return null==a?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=void 0!==c;if(null==a&&(a=[]),m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){if(null==a&&(a=[]),n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),void 0!==c?a.reduceRight(b,c):a.reduceRight(b);var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},w.filter=w.select=function(a,b,c){var d=[];return null==a?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return null==a?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return null==a?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),e)};var y=w.some=w.any=function(a,b,d){b=b||w.identity;var e=!1;return null==a?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){return(e|=b.call(d,a,f,g))?c:void 0}),!!e)};w.include=w.contains=function(a,b){var c=!1;return null==a?c:r&&a.indexOf===r?-1!=a.indexOf(b):(y(a,function(a){return(c=a===b)?!0:void 0}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-1/0};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:1/0};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={};return x(a,function(a,d){var e=b(a,d);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);for(var d=0,e=a.length;e>d;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return null==b||c?a[0]:g.call(a,0,b)},w.rest=w.tail=function(a,b,c){return g.call(a,null==b||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){return w.isArray(b)?a.concat(w.flatten(b)):(a[a.length]=b,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b){return w.reduce(a,function(a,c,d){return 0!=d&&(b===!0?w.last(a)==c:w.include(a,c))||(a[a.length]=c),a},[])},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a,b){return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){for(var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(null==a)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(null==a)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return 0==b.length&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){for(var b=g.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if("object"!==c)return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b&&w.isEqual(a[g],b[g])))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return 0===a.length;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!(!a||1!=a.nodeType)},w.isArray=t||function(a){return"[object Array]"===i.call(a)},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return!(!a||!j.call(a,"callee"))},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(""===a||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(0===a||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return null===a},w.isUndefined=function(a){return void 0===a},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){return b.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}(),function(){var a,b=this,c=this.Flotr;a={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(b,c){a.graphTypes[b]=c,a.defaultOptions[b]=c.options||{},a.defaultOptions.defaultType=a.defaultOptions.defaultType||b},addPlugin:function(b,c){a.plugins[b]=c,a.defaultOptions[b]=c.options||{}},draw:function(b,c,d,e){return new(e=e||a.Graph)(b,c,d)},merge:function(b,c){var d,e,f=c||{};for(d in b)e=b[d],f[d]=e&&"object"==typeof e?e.constructor===Array?this._.clone(e):e.constructor===RegExp||this._.isElement(e)||e.jquery?e:a.merge(e,c?c[d]:void 0):e;return f},clone:function(b){return a.merge(b,{})},getTickSize:function(b,c,d,e){var f=(d-c)/b,g=a.getMagnitude(f),h=10,i=f/g;return 1.5>i?h=1:2.25>i?h=2:3>i?h=0===e?2:2.5:7.5>i&&(h=5),h*g},defaultTickFormatter:function(a){return a+""},defaultTrackFormatter:function(a){return"("+a.x+", "+a.y+")"},engineeringNotation:function(a,b,c){var d=["Y","Z","E","P","T","G","M","k",""],e=["y","z","a","f","p","n","µ","m",""],f=d.length;if(c=c||1e3,b=Math.pow(10,b||2),0===a)return 0;if(a>1)for(;f--&&a>=c;)a/=c;else for(d=e,f=d.length;f--&&1>a;)a*=c;return Math.round(a*b)/b+d[f]},getMagnitude:function(a){return Math.pow(10,Math.floor(Math.log(a)/Math.LN10))},toPixel:function(a){return Math.floor(a)+.5},toRad:function(a){return-a*(Math.PI/180)},floorInBase:function(a,b){return b*Math.floor(a/b)},drawText:function(b,c,d,e,f){return b.fillText?(f=this._.extend({size:a.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},f),b.save(),b.translate(d,e),b.rotate(f.angle),b.fillStyle=f.color,b.font=(f.weight>1?"bold ":"")+1.3*f.size+"px sans-serif",b.textAlign=f.textAlign,b.textBaseline=f.textBaseline,b.fillText(c,0,0),void b.restore()):void b.drawText(c,d,e,f)},getBestTextAlign:function(b,c){return c=c||{textAlign:"center",textBaseline:"middle"},b+=a.getTextAngleFromAlign(c),Math.abs(Math.cos(b))>.01&&(c.textAlign=Math.cos(b)>0?"right":"left"),Math.abs(Math.sin(b))>.01&&(c.textBaseline=Math.sin(b)>0?"top":"bottom"),c},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(b){return a.alignTable[b.textAlign+" "+b.textBaseline]||0},noConflict:function(){return b.Flotr=c,this}},b.Flotr=a}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function a(){this.rgba=["r","g","b","a"];for(var a=4;-1<--a;)this[this.rgba[a]]=arguments[a]||(3==a?1:0);this.normalize()}var b=Flotr._,c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};a.prototype={scale:function(){for(var a=4;-1<--a;)b.isUndefined(arguments[a])||(this[this.rgba[a]]*=arguments[a]);return this.normalize()},alpha:function(a){return b.isUndefined(a)||b.isNull(a)||(this.a=a),this.normalize()},clone:function(){return new a(this.r,this.b,this.g,this.a)},limit:function(a,b,c){return Math.max(Math.min(a,c),b)},normalize:function(){var a=this.limit;return this.r=a(parseInt(this.r,10),0,255),this.g=a(parseInt(this.g,10),0,255),this.b=a(parseInt(this.b,10),0,255),this.a=a(this.a,0,1),this},distance:function(b){if(b){b=new a.parse(b);for(var c=0,d=3;-1<--d;)c+=Math.abs(this[this.rgba[d]]-b[this.rgba[d]]);return c}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var a=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>a?"#000000":"#ffffff"}},b.extend(a,{parse:function(b){if(b instanceof a)return b;var d;if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return new a(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return new a(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return new a(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))return new a(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return new a(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))return new a(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));var e=(b+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==e?new a(255,255,255,0):(d=c[e])?new a(d[0],d[1],d[2]):new a(0,0,0,0)},processColor:function(c,d){var e=d.opacity;if(!c)return"rgba(0, 0, 0, 0)";if(c instanceof a)return c.alpha(e).toString();if(b.isString(c))return a.parse(c).alpha(e).toString();var f=c.colors?c:{colors:c};if(!d.ctx)return b.isArray(f.colors)?a.parse(b.isArray(f.colors[0])?f.colors[0][1]:f.colors[0]).alpha(e).toString():"rgba(0, 0, 0, 0)";f=b.extend({start:"top",end:"bottom"},f),/top/i.test(f.start)&&(d.x1=0),/left/i.test(f.start)&&(d.y1=0),/bottom/i.test(f.end)&&(d.x2=0),/right/i.test(f.end)&&(d.y2=0);var g,h,i,j=d.ctx.createLinearGradient(d.x1,d.y1,d.x2,d.y2);for(g=0;g<f.colors.length;g++)h=f.colors[g],b.isArray(h)?(i=h[0],h=h[1]):i=g/(f.colors.length-1),j.addColorStop(i,a.parse(h).alpha(e));return j}}),Flotr.Color=a}(),Flotr.Date={set:function(a,b,c,d){c=c||"UTC",b="set"+("UTC"===c?"UTC":"")+b,a[b](d)},get:function(a,b,c){return c=c||"UTC",b="get"+("UTC"===c?"UTC":"")+b,a[b]()},format:function(a,b,c){function d(a){return a+="",1==a.length?"0"+a:a}if(a){for(var e,f=this.get,g={h:f(a,"Hours",c).toString(),H:d(f(a,"Hours",c)),M:d(f(a,"Minutes",c)),S:d(f(a,"Seconds",c)),s:f(a,"Milliseconds",c),d:f(a,"Date",c).toString(),m:(f(a,"Month",c)+1).toString(),y:f(a,"FullYear",c).toString(),b:Flotr.Date.monthNames[f(a,"Month",c)]},h=[],i=!1,j=0;j<b.length;++j)e=b.charAt(j),i?(h.push(g[e]||e),i=!1):"%"==e?i=!0:h.push(e);return h.join("")}},getFormat:function(a,b){var c=Flotr.Date.timeUnits;return a<c.second?"%h:%M:%S.%s":a<c.minute?"%h:%M:%S":a<c.day?b<2*c.day?"%h:%M":"%b %d %h:%M":a<c.month?"%b %d":a<c.year?b<c.year?"%b":"%b %y":"%y"},formatter:function(a,b){var c=b.options,d=Flotr.Date.timeUnits[c.timeUnit],e=new Date(a*d);if(b.options.timeFormat)return Flotr.Date.format(e,c.timeFormat,c.timeMode);var f=(b.max-b.min)*d,g=b.tickSize*Flotr.Date.timeUnits[b.tickUnit];return Flotr.Date.format(e,Flotr.Date.getFormat(g,f),c.timeMode)},generator:function(a){function b(a){f(r,a,k,Flotr.floorInBase(g(r,a,k),q))}var c,d,e,f=this.set,g=this.get,h=this.timeUnits,i=this.spec,j=a.options,k=j.timeMode,l=h[j.timeUnit],m=a.min*l,n=a.max*l,o=(n-m)/j.noTicks,p=[],q=a.tickSize;for(d=j.tickFormatter===Flotr.defaultTickFormatter?this.formatter:j.tickFormatter,e=0;e<i.length-1;++e){var r=i[e][0]*h[i[e][1]];if(o<(r+i[e+1][0]*h[i[e+1][1]])/2&&r>=q)break}q=i[e][0],c=i[e][1],"year"==c&&(q=Flotr.getTickSize(j.noTicks*h.year,m,n,0),.5==q&&(c="month",q=6)),a.tickUnit=c,a.tickSize=q;var s=q*h[c];switch(r=new Date(m),c){case"millisecond":b("Milliseconds");break;case"second":b("Seconds");break;case"minute":b("Minutes");break;case"hour":b("Hours");break;case"month":b("Month");break;case"year":b("FullYear")}s>=h.second&&f(r,"Milliseconds",k,0),s>=h.minute&&f(r,"Seconds",k,0),s>=h.hour&&f(r,"Minutes",k,0),s>=h.day&&f(r,"Hours",k,0),s>=4*h.day&&f(r,"Date",k,1),s>=h.year&&f(r,"Month",k,0);var t,u=0,v=0/0;do if(t=v,v=r.getTime(),p.push({v:v/l,label:d(v/l,a)}),"month"==c)if(1>q){f(r,"Date",k,1);var w=r.getTime();f(r,"Month",k,g(r,"Month",k)+1);var x=r.getTime();r.setTime(v+u*h.hour+(x-w)*q),u=g(r,"Hours",k),f(r,"Hours",k,0)}else f(r,"Month",k,g(r,"Month",k)+q);else"year"==c?f(r,"FullYear",k,g(r,"FullYear",k)+q):r.setTime(v+s);while(n>v&&v!=t);return p},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function a(a){return a&&a.jquery?a[0]:a}var b=Flotr._;Flotr.DOM={addClass:function(c,d){c=a(c);var e=c.className?c.className:"";b.include(e.split(/\s+/g),d)||(c.className=(e?e+" ":"")+d)},create:function(a){return document.createElement(a)},node:function(a){var b,c=Flotr.DOM.create("div");return c.innerHTML=a,b=c.children[0],c.innerHTML="",b},empty:function(b){b=a(b),b.innerHTML=""},remove:function(b){b=a(b),b.parentNode.removeChild(b)},hide:function(b){b=a(b),Flotr.DOM.setStyles(b,{display:"none"})},insert:function(c,d){c=a(c),b.isString(d)?c.innerHTML+=d:b.isElement(d)&&c.appendChild(d)},opacity:function(b,c){b=a(b),b.style.opacity=c},position:function(b,c){return b=a(b),b.offsetParent?(c=this.position(b.offsetParent),c.left+=b.offsetLeft,c.top+=b.offsetTop,c):{left:b.offsetLeft||0,top:b.offsetTop||0}},removeClass:function(c,d){var e=c.className?c.className:"";c=a(c),c.className=b.filter(e.split(/\s+/g),function(a){return a!=d?!0:void 0}).join(" ")},setStyles:function(c,d){c=a(c),b.each(d,function(a,b){c.style[b]=a})},show:function(b){b=a(b),Flotr.DOM.setStyles(b,{display:""})},size:function(b){return b=a(b),{height:b.offsetHeight,width:b.offsetWidth}}}}(),function(){var a=Flotr,b=a.bean;a.EventAdapter={observe:function(a,c,d){return b.add(a,c,d),this},fire:function(a,c,d){return b.fire(a,c,d),"undefined"!=typeof Prototype&&Event.fire(a,c,d),this},stopObserving:function(a,c,d){return b.remove(a,c,d),this},eventPointer:function(b){if(!a._.isUndefined(b.touches)&&b.touches.length>0)return{x:b.touches[0].pageX,y:b.touches[0].pageY};if(!a._.isUndefined(b.changedTouches)&&b.changedTouches.length>0)return{x:b.changedTouches[0].pageX,y:b.changedTouches[0].pageY};if(b.pageX||b.pageY)return{x:b.pageX,y:b.pageY};if(b.clientX||b.clientY){var c=document,d=c.body,e=c.documentElement;return{x:b.clientX+d.scrollLeft+e.scrollLeft,y:b.clientY+d.scrollTop+e.scrollTop}}}}}(),function(){var a=Flotr,b=a.DOM,c=a._,d=function(a){this.o=a};d.prototype={dimensions:function(a,b,c,d){return a?this.o.html?this.html(a,this.o.element,c,d):this.canvas(a,b):{width:0,height:0}},canvas:function(b,c){if(this.o.textEnabled){c=c||{};var d,e=this.measureText(b,c),f=e.width,g=c.size||a.defaultOptions.fontSize,h=c.angle||0,i=Math.cos(h),j=Math.sin(h),k=2,l=6;return d={width:Math.abs(i*f)+Math.abs(j*g)+k,height:Math.abs(j*f)+Math.abs(i*g)+l}}},html:function(a,c,d,e){var f=b.create("div");return b.setStyles(f,{position:"absolute",top:"-10000px"}),b.insert(f,'<div style="'+d+'" class="'+e+' flotr-dummy-div">'+a+"</div>"),b.insert(this.o.element,f),b.size(f)},measureText:function(b,d){var e,f=this.o.ctx;return!f.fillText||a.isIphone&&f.measure?{width:f.measure(b,d)}:(d=c.extend({size:a.defaultOptions.fontSize,weight:1,angle:0},d),f.save(),f.font=(d.weight>1?"bold ":"")+1.3*d.size+"px sans-serif",e=f.measureText(b),f.restore(),e)}},Flotr.Text=d}(),function(){function a(){return c.observe.apply(this,arguments),this._handles.push(arguments),this}var b=Flotr.DOM,c=Flotr.EventAdapter,d=Flotr._,e=Flotr;Graph=function(a,b,f){this._setEl(a),this._initMembers(),this._initPlugins(),c.fire(this.el,"flotr:beforeinit",[this]),this.data=b,this.series=e.Series.getSeries(b),this._initOptions(f),this._initGraphTypes(),this._initCanvas(),this._text=new e.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),c.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(d.bind(function(){c.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){c.fire(this.el,"flotr:destroy"),d.each(this._handles,function(a){c.stopObserving.apply(this,a)}),this._handles=[],this.el.graph=null},observe:a,_observe:a,processColor:function(a,b){var c={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};
return d.extend(c,b),e.Color.processColor(a,c)},findDataRanges:function(){var a,b,c,f=this.axes;d.each(this.series,function(d){c=d.getRange(),c&&(a=d.xaxis,b=d.yaxis,a.datamin=Math.min(c.xmin,a.datamin),a.datamax=Math.max(c.xmax,a.datamax),b.datamin=Math.min(c.ymin,b.datamin),b.datamax=Math.max(c.ymax,b.datamax),a.used=a.used||c.xused,b.used=b.used||c.yused)},this),f.x.used||f.x2.used||(f.x.used=!0),f.y.used||f.y2.used||(f.y.used=!0),d.each(f,function(a){a.calculateRange()});var g=d.keys(e.graphTypes),h=!1;d.each(this.series,function(a){a.hide||(d.each(g,function(b){a[b]&&a[b].show&&(this.extendRange(b,a),h=!0)},this),h||this.extendRange(this.options.defaultType,a))},this)},extendRange:function(a,b){this[a].extendRange&&this[a].extendRange(b,b.data,b[a],this[a]),this[a].extendYRange&&this[a].extendYRange(b.yaxis,b.data,b[a],this[a]),this[a].extendXRange&&this[a].extendXRange(b.xaxis,b.data,b[a],this[a])},calculateSpacing:function(){var a,b,c=this.axes,e=this.options,f=this.series,g=e.grid.labelMargin,h=this._text,i=c.x,j=c.x2,k=c.y,l=c.y2,m=e.grid.outlineWidth;for(d.each(c,function(a){a.calculateTicks(),a.calculateTextDimensions(h,e)}),b=h.dimensions(e.title,{size:1.5*e.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=b.height,b=h.dimensions(e.subtitle,{size:e.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=b.height,a=0;a<e.length;++a)f[a].points.show&&(m=Math.max(m,f[a].points.radius+f[a].points.lineWidth/2));var n=this.plotOffset;i.options.margin===!1?(n.bottom=0,n.top=0):i.options.margin===!0?(n.bottom+=(e.grid.circular?0:i.used&&i.options.showLabels?i.maxLabel.height+g:0)+(i.used&&i.options.title?i.titleSize.height+g:0)+m,n.top+=(e.grid.circular?0:j.used&&j.options.showLabels?j.maxLabel.height+g:0)+(j.used&&j.options.title?j.titleSize.height+g:0)+this.subtitleHeight+this.titleHeight+m):(n.bottom=i.options.margin,n.top=i.options.margin),k.options.margin===!1?(n.left=0,n.right=0):k.options.margin===!0?(n.left+=(e.grid.circular?0:k.used&&k.options.showLabels?k.maxLabel.width+g:0)+(k.used&&k.options.title?k.titleSize.width+g:0)+m,n.right+=(e.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.width+g:0)+(l.used&&l.options.title?l.titleSize.width+g:0)+m):(n.left=k.options.margin,n.right=k.options.margin),n.top=Math.floor(n.top),this.plotWidth=this.canvasWidth-n.left-n.right,this.plotHeight=this.canvasHeight-n.bottom-n.top,i.length=j.length=this.plotWidth,k.length=l.length=this.plotHeight,k.offset=l.offset=this.plotHeight,i.setScale(),j.setScale(),k.setScale(),l.setScale()},draw:function(a){var b,d=this.ctx;if(c.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(d.save(),d.translate(this.plotOffset.left,this.plotOffset.top),b=0;b<this.series.length;b++)this.series[b].hide||this.drawSeries(this.series[b]);d.restore(),this.clip()}c.fire(this.el,"flotr:afterdraw",[this.series,this]),a&&a()},drawSeries:function(a){function b(a,b){var c=this.getOptions(a,b);this[b].draw(c)}var c=!1;a=a||this.series,d.each(e.graphTypes,function(d,e){a[e]&&a[e].show&&this[e]&&(c=!0,b.call(this,a,e))},this),c||b.call(this,a,this.options.defaultType)},getOptions:function(a,b){var c=a[b],d=(this[b],a.xaxis),f=a.yaxis,g={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:a.data,color:a.color,shadowSize:a.shadowSize,xScale:d.d2p,yScale:f.d2p,xInverse:d.p2d,yInverse:f.p2d};return g=e.merge(c,g),g.fillStyle=this.processColor(c.fillColor||a.color,{opacity:c.fillOpacity}),g},getEventPosition:function(a){var d,e,f,g=document,h=g.body,i=g.documentElement,j=this.axes,k=this.plotOffset,l=this.lastMousePos,m=c.eventPointer(a),n=m.x-l.pageX,o=m.y-l.pageY;return"ontouchstart"in this.el?(d=b.position(this.overlay),e=m.x-d.left-k.left,f=m.y-d.top-k.top):(d=this.overlay.getBoundingClientRect(),e=a.clientX-d.left-k.left-h.scrollLeft-i.scrollLeft,f=a.clientY-d.top-k.top-h.scrollTop-i.scrollTop),{x:j.x.p2d(e),x2:j.x2.p2d(e),y:j.y.p2d(f),y2:j.y2.p2d(f),relX:e,relY:f,dX:n,dY:o,absX:m.x,absY:m.y,pageX:m.x,pageY:m.y}},clickHandler:function(a){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):void c.fire(this.el,"flotr:click",[this.getEventPosition(a),this])},mouseMoveHandler:function(a){if(!this.mouseDownMoveHandler){var b=this.getEventPosition(a);c.fire(this.el,"flotr:mousemove",[a,b,this]),this.lastMousePos=b}},mouseDownHandler:function(a){this.mouseUpHandler||(this.mouseUpHandler=d.bind(function(a){c.stopObserving(document,"mouseup",this.mouseUpHandler),c.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,c.fire(this.el,"flotr:mouseup",[a,this])},this),this.mouseDownMoveHandler=d.bind(function(b){var d=this.getEventPosition(b);c.fire(this.el,"flotr:mousemove",[a,d,this]),this.lastMousePos=d},this),c.observe(document,"mouseup",this.mouseUpHandler),c.observe(document,"mousemove",this.mouseDownMoveHandler),c.fire(this.el,"flotr:mousedown",[a,this]),this.ignoreClick=!1)},drawTooltip:function(a,c,d,e){var f=this.getMouseTrack(),g="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",h=e.position,i=e.margin,j=this.plotOffset;null!==c&&null!==d?(e.relative?("n"==h.charAt(0)?g+="bottom:"+(i-j.top-d+this.canvasHeight)+"px;top:auto;":"s"==h.charAt(0)&&(g+="top:"+(i+j.top+d)+"px;bottom:auto;"),"e"==h.charAt(1)?g+="left:"+(i+j.left+c)+"px;right:auto;":"w"==h.charAt(1)&&(g+="right:"+(i-j.left-c+this.canvasWidth)+"px;left:auto;")):("n"==h.charAt(0)?g+="top:"+(i+j.top)+"px;bottom:auto;":"s"==h.charAt(0)&&(g+="bottom:"+(i+j.bottom)+"px;top:auto;"),"e"==h.charAt(1)?g+="right:"+(i+j.right)+"px;left:auto;":"w"==h.charAt(1)&&(g+="left:"+(i+j.left)+"px;right:auto;")),f.style.cssText=g,b.empty(f),b.insert(f,a),b.show(f)):b.hide(f)},clip:function(a){var b=this.plotOffset,c=this.canvasWidth,d=this.canvasHeight;if(a=a||this.ctx,e.isIE&&e.isIE<9&&!e.isFlashCanvas){if(a===this.octx)return;a.save(),a.fillStyle=this.processColor(this.options.ieBackgroundColor),a.fillRect(0,0,c,b.top),a.fillRect(0,0,b.left,d),a.fillRect(0,d-b.bottom,c,b.bottom),a.fillRect(c-b.right,0,b.right,d),a.restore()}else a.clearRect(0,0,c,b.top),a.clearRect(0,0,b.left,d),a.clearRect(0,d-b.bottom,c,b.bottom),a.clearRect(c-b.right,0,b.right,d)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){d.each(e.graphTypes,function(a,b){this[b]=e.clone(a)},this)},_initEvents:function(){var a,b,e,f=this.el;"ontouchstart"in f?(a=d.bind(function(d){e=!0,c.stopObserving(document,"touchend",a),c.fire(f,"flotr:mouseup",[event,this]),this.multitouches=null,b||this.clickHandler(d)},this),this.observe(this.overlay,"touchstart",d.bind(function(d){b=!1,e=!1,this.ignoreClick=!1,d.touches&&d.touches.length>1&&(this.multitouches=d.touches),c.fire(f,"flotr:mousedown",[event,this]),this.observe(document,"touchend",a)},this)),this.observe(this.overlay,"touchmove",d.bind(function(a){var d=this.getEventPosition(a);this.options.preventDefault&&a.preventDefault(),b=!0,this.multitouches||a.touches&&a.touches.length>1?this.multitouches=a.touches:e||c.fire(f,"flotr:mousemove",[event,d,this]),this.lastMousePos=d},this))):this.observe(this.overlay,"mousedown",d.bind(this.mouseDownHandler,this)).observe(f,"mousemove",d.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",d.bind(this.clickHandler,this)).observe(f,"mouseout",function(a){c.fire(f,"flotr:mouseout",a)})},_initCanvas:function(){function a(a,c){return a||(a=b.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof a.getContext&&(FlashCanvas.initElement(a),this.isFlashCanvas=!0),a.className="flotr-"+c,a.style.cssText="position:absolute;left:0px;top:0px;",b.insert(h,a)),d.each(g,function(d,e){b.show(a),("canvas"!=c||a.getAttribute(e)!==d)&&(a.setAttribute(e,d*i.resolution),a.style[e]=d+"px")}),a.context_=null,a}function c(a){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a);var b=a.getContext("2d");return window.G_vmlCanvasManager||b.scale(i.resolution,i.resolution),b}var e,f,g,h=this.el,i=this.options,j=h.children,k=[];for(f=j.length;f--;)e=j[f],this.canvas||"flotr-canvas"!==e.className?this.overlay||"flotr-overlay"!==e.className?k.push(e):this.overlay=e:this.canvas=e;for(f=k.length;f--;)h.removeChild(k[f]);if(b.setStyles(h,{position:"relative"}),g={},g.width=h.clientWidth,g.height=h.clientHeight,g.width<=0||g.height<=0||i.resolution<=0)throw"Invalid dimensions for plot, width = "+g.width+", height = "+g.height+", resolution = "+i.resolution;this.canvas=a(this.canvas,"canvas"),this.overlay=a(this.overlay,"overlay"),this.ctx=c(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=c(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=g.height,this.canvasWidth=g.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){d.each(e.plugins,function(a,b){d.each(a.callbacks,function(a,b){this.observe(this.el,b,d.bind(a,this))},this),this[b]=e.clone(a),d.each(this[b],function(a,c){d.isFunction(a)&&(this[b][c]=d.bind(a,this))},this)},this)},_initOptions:function(a){var b=e.clone(e.defaultOptions);b.x2axis=d.extend(d.clone(b.xaxis),b.x2axis),b.y2axis=d.extend(d.clone(b.yaxis),b.y2axis),this.options=e.merge(a||{},b),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),c.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=e.Axis.getAxes(this.options);var f,g,h,i,j=[],k=[],l=this.series.length,m=this.series.length,n=this.options.colors,o=[],p=0;for(g=m-1;g>-1;--g)f=this.series[g].color,f&&(--m,d.isNumber(f)?j.push(f):o.push(e.Color.parse(f)));for(g=j.length-1;g>-1;--g)m=Math.max(m,j[g]+1);for(g=0;k.length<m;){f=n.length==g?new e.Color(100,100,100):e.Color.parse(n[g]);var q=p%2==1?-1:1,r=1+q*Math.ceil(p/2)*.2;f.scale(r,r,r),k.push(f),++g>=n.length&&(g=0,++p)}for(g=0,h=0;l>g;++g){i=this.series[g],i.color?d.isNumber(i.color)&&(i.color=k[i.color].toString()):i.color=k[h++].toString(),i.xaxis||(i.xaxis=this.axes.x),1==i.xaxis?i.xaxis=this.axes.x:2==i.xaxis&&(i.xaxis=this.axes.x2),i.yaxis||(i.yaxis=this.axes.y),1==i.yaxis?i.yaxis=this.axes.y:2==i.yaxis&&(i.yaxis=this.axes.y2);for(var s in e.graphTypes)i[s]=d.extend(d.clone(this.options[s]),i[s]);i.mouse=d.extend(d.clone(this.options.mouse),i.mouse),d.isUndefined(i.shadowSize)&&(i.shadowSize=this.options.shadowSize)}},_setEl:function(a){if(!a)throw"The target container doesn't exist";if(a.graph instanceof Graph)a.graph.destroy();else if(!a.clientWidth)throw"The target container must be visible";a.graph=this,this.el=a}},Flotr.Graph=Graph}(),function(){function a(a){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,d.extend(this,a)}function b(a,b){return a=Math.log(Math.max(a,Number.MIN_VALUE)),b!==Math.E&&(a/=Math.log(b)),a}function c(a,b){return b===Math.E?Math.exp(a):Math.pow(b,a)}var d=Flotr._,e="logarithmic";a.prototype={setScale:function(){var a,d=this.length,f=this.max,g=this.min,h=this.offset,i=this.orientation,j=this.options,k=j.scaling===e;a=k?d/(b(f,j.base)-b(g,j.base)):d/(f-g),this.scale=a,k?(this.d2p=function(c){return h+i*(b(c,j.base)-b(g,j.base))*a},this.p2d=function(d){return c((h+i*d)/a+b(g,j.base),j.base)}):(this.d2p=function(b){return h+i*(b-g)*a},this.p2d=function(b){return(h+i*b)/a+g})},calculateTicks:function(){var a=this.options;this.ticks=[],this.minorTicks=[],a.ticks?(this._cleanUserTicks(a.ticks,this.ticks),this._cleanUserTicks(a.minorTicks||[],this.minorTicks)):"time"==a.mode?this._calculateTimeTicks():"logarithmic"===a.scaling?this._calculateLogTicks():this._calculateTicks(),d.each(this.ticks,function(a){a.label+=""}),d.each(this.minorTicks,function(a){a.label+=""})},calculateRange:function(){if(this.used){var a=this,b=a.options,c=null!==b.min?b.min:a.datamin,d=null!==b.max?b.max:a.datamax,e=b.autoscaleMargin;if("logarithmic"==b.scaling&&(0>=c&&(c=a.datamin),0>=d&&(d=c)),d==c){var f=d?.01:1;null===b.min&&(c-=f),null===b.max&&(d+=f)}if("logarithmic"===b.scaling){0>c&&(c=d/b.base);var g=Math.log(d);b.base!=Math.E&&(g/=Math.log(b.base)),g=Math.ceil(g);var h=Math.log(c);b.base!=Math.E&&(h/=Math.log(b.base)),h=Math.ceil(h),a.tickSize=Flotr.getTickSize(b.noTicks,h,g,null===b.tickDecimals?0:b.tickDecimals),null===b.minorTickFreq&&(b.minorTickFreq=g-h>10?0:g-h>5?2:5)}else a.tickSize=Flotr.getTickSize(b.noTicks,c,d,b.tickDecimals);a.min=c,a.max=d,null===b.min&&b.autoscale&&(a.min-=a.tickSize*e,a.min<0&&a.datamin>=0&&(a.min=0),a.min=a.tickSize*Math.floor(a.min/a.tickSize)),null===b.max&&b.autoscale&&(a.max+=a.tickSize*e,a.max>0&&a.datamax<=0&&a.datamax!=a.datamin&&(a.max=0),a.max=a.tickSize*Math.ceil(a.max/a.tickSize)),a.min==a.max&&(a.max=a.min+1)}},calculateTextDimensions:function(a,b){var c,d,e="";if(this.options.showLabels)for(d=0;d<this.ticks.length;++d)c=this.ticks[d].label.length,c>e.length&&(e=this.ticks[d].label);this.maxLabel=a.dimensions(e,{size:b.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=a.dimensions(this.options.title,{size:1.2*b.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(a,b){var c,e,f,g,h=this,i=this.options;for(d.isFunction(a)&&(a=a({min:h.min,max:h.max})),e=0;e<a.length;++e)g=a[e],"object"==typeof g?(c=g[0],f=g.length>1?g[1]:i.tickFormatter(c,{min:h.min,max:h.max})):(c=g,f=i.tickFormatter(c,{min:this.min,max:this.max})),b[e]={v:c,label:f}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var a,b,c=this,d=c.options,e=Math.log(c.max);d.base!=Math.E&&(e/=Math.log(d.base)),e=Math.ceil(e);var f=Math.log(c.min);for(d.base!=Math.E&&(f/=Math.log(d.base)),f=Math.ceil(f),i=f;e>i;i+=c.tickSize){b=d.base==Math.E?Math.exp(i):Math.pow(d.base,i);var g=b*(d.base==Math.E?Math.exp(c.tickSize):Math.pow(d.base,c.tickSize)),h=(g-b)/d.minorTickFreq;for(c.ticks.push({v:b,label:d.tickFormatter(b,{min:c.min,max:c.max})}),a=b+h;g>a;a+=h)c.minorTicks.push({v:a,label:d.tickFormatter(a,{min:c.min,max:c.max})})}b=d.base==Math.E?Math.exp(i):Math.pow(d.base,i),c.ticks.push({v:b,label:d.tickFormatter(b,{min:c.min,max:c.max})})},_calculateTicks:function(){var a,b,c,d,e,f,g=this,h=g.options,i=g.tickSize,j=g.min,k=g.max,l=i*Math.ceil(j/i);for(h.minorTickFreq&&(b=i/h.minorTickFreq),e=0;(c=d=l+e*i)<=k;++e)if(a=h.tickDecimals,null===a&&(a=1-Math.floor(Math.log(i)/Math.LN10)),0>a&&(a=0),c=c.toFixed(a),g.ticks.push({v:c,label:h.tickFormatter(c,{min:g.min,max:g.max})}),h.minorTickFreq)for(f=0;f<h.minorTickFreq&&k>e*i+f*b;++f)c=d+f*b,g.minorTicks.push({v:c,label:h.tickFormatter(c,{min:g.min,max:g.max})})}},d.extend(a,{getAxes:function(b){return{x:new a({options:b.xaxis,n:1,length:this.plotWidth}),x2:new a({options:b.x2axis,n:2,length:this.plotWidth}),y:new a({options:b.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new a({options:b.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=a}(),function(){function a(a){b.extend(this,a)}var b=Flotr._;a.prototype={getRange:function(){var a,b,c,d=this.data,e=d.length,f=Number.MAX_VALUE,g=Number.MAX_VALUE,h=-Number.MAX_VALUE,i=-Number.MAX_VALUE,j=!1,k=!1;if(0>e||this.hide)return!1;for(c=0;e>c;c++)a=d[c][0],b=d[c][1],null!==a&&(f>a&&(f=a,j=!0),a>h&&(h=a,j=!0)),null!==b&&(g>b&&(g=b,k=!0),b>i&&(i=b,k=!0));return{xmin:f,xmax:h,ymin:g,ymax:i,xused:j,yused:k}}},b.extend(a,{getSeries:function(c){return b.map(c,function(c){var d;return c.data?(d=new a,b.extend(d,c)):d=new a({data:c}),d})}}),Flotr.Series=a}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(a){var b,c=a.context,d=a.lineWidth,e=a.shadowSize;c.save(),c.lineJoin="round",e&&(c.lineWidth=e/2,b=d/2+c.lineWidth/2,c.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,b+e/2,!1),c.strokeStyle="rgba(0,0,0,0.2)",this.plot(a,b,!1)),c.lineWidth=d,c.strokeStyle=a.color,this.plot(a,0,!0),c.restore()},plot:function(a,b,c){function d(){!b&&a.fill&&w&&(e=o(w[0]),l.fillStyle=a.fillStyle,l.lineTo(f,v),l.lineTo(e,v),l.lineTo(e,p(w[1])),l.fill(),a.fillBorder&&l.stroke())}var e,f,g,h,i,j,k,l=a.context,m=a.width,n=a.height,o=a.xScale,p=a.yScale,q=a.data,r=a.stacked?this.stack:!1,s=q.length-1,t=null,u=null,v=p(0),w=null;if(!(1>s)){for(l.beginPath(),k=0;s>k;++k)null!==q[k][1]&&null!==q[k+1][1]?(e=o(q[k][0]),f=o(q[k+1][0]),null===w&&(w=q[k]),r?(i=r.values[q[k][0]]||0,j=r.values[q[k+1][0]]||r.values[q[k][0]]||0,g=p(q[k][1]+i),h=p(q[k+1][1]+j),c&&(q[k].y0=i,r.values[q[k][0]]=q[k][1]+i,k==s-1&&(q[k+1].y0=j,r.values[q[k+1][0]]=q[k+1][1]+j))):(g=p(q[k][1]),h=p(q[k+1][1])),g>n&&h>n||0>g&&0>h||0>e&&0>f||e>m&&f>m||((t!=e||u!=g+b)&&l.moveTo(e,g+b),t=f,u=h+b,a.steps?(l.lineTo(t+b/2,g+b),l.lineTo(t+b/2,u)):l.lineTo(t,u))):a.fill&&k>0&&null!==q[k][1]&&(l.stroke(),d(),w=null,l.closePath(),l.beginPath());(!a.fill||a.fill&&!a.fillBorder)&&l.stroke(),d(),l.closePath()}},extendYRange:function(a,b,c,d){var e=a.options;if(c.stacked&&(!e.max&&0!==e.max||!e.min&&0!==e.min)){var f,g,h=a.max,i=a.min,j=d.positiveSums||{},k=d.negativeSums||{};for(g=0;g<b.length;g++)f=b[g][0]+"",b[g][1]>0?(j[f]=(j[f]||0)+b[g][1],h=Math.max(h,j[f])):(k[f]=(k[f]||0)+b[g][1],i=Math.min(i,k[f]));d.negativeSums=k,d.positiveSums=j,a.max=h,a.min=i}c.steps&&(this.hit=function(a){var b,c=a.data,d=a.args,e=a.yScale,f=d[0],g=c.length,h=d[1],i=a.xInverse(f.relX),j=f.relY;for(b=0;g-1>b;b++)if(i>=c[b][0]&&i<=c[b+1][0]){Math.abs(e(c[b][1])-j)<8&&(h.x=c[b][0],h.y=c[b][1],h.index=b,h.seriesIndex=a.index);break}},this.drawHit=function(a){var b,c=a.context,d=a.args,e=a.data,f=a.xScale,g=d.index,h=f(d.x),i=a.yScale(d.y);e.length-1>g&&(b=a.xScale(e[g+1][0]),c.save(),c.strokeStyle=a.color,c.lineWidth=a.lineWidth,c.beginPath(),c.moveTo(h,i),c.lineTo(b,i),c.stroke(),c.closePath(),c.restore())},this.clearHit=function(a){var b,c=a.context,d=a.args,e=a.data,f=a.xScale,g=a.lineWidth,h=d.index,i=f(d.x),j=a.yScale(d.y);e.length-1>h&&(b=a.xScale(e[h+1][0]),c.clearRect(i-g,j-g,b-i+2*g,2*g))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(a){var b=a.context;this.current+=1,b.save(),b.lineJoin="miter",b.lineWidth=a.lineWidth,b.strokeStyle=a.color,a.fill&&(b.fillStyle=a.fillStyle),this.plot(a),b.restore()},plot:function(a){var b,c,d,e,f,g,h=a.data,i=a.context,j=a.shadowSize;if(!(h.length<1))for(this.translate(i,a.horizontal),b=0;b<h.length;b++)c=this.getBarGeometry(h[b][0],h[b][1],a),null!==c&&(d=c.left,e=c.top,f=c.width,g=c.height,a.fill&&i.fillRect(d,e,f,g),j&&(i.save(),i.fillStyle="rgba(0,0,0,0.05)",i.fillRect(d+j,e+j,f,g),i.restore()),a.lineWidth&&i.strokeRect(d,e,f,g))},translate:function(a,b){b&&(a.rotate(-Math.PI/2),a.scale(-1,1))},getBarGeometry:function(a,b,c){var d,e,f,g,h,i=c.horizontal,j=c.barWidth,k=c.centered,l=c.stacked?this.stack:!1,m=c.lineWidth,n=k?j/2:0,o=i?c.yScale:c.xScale,p=i?c.xScale:c.yScale,q=i?b:a,r=i?a:b,s=0;return c.grouped&&(this.current/this.groups,q-=n,j/=this.groups,n=j/2,q=q+j*this.current-n),l&&(d=r>0?l.positive:l.negative,s=d[q]||s,d[q]=s+r),e=o(q-n),f=o(q+j-n),g=p(r+s),h=p(s),0>h&&(h=0),null===a||null===b?null:{x:q,y:r,xScale:o,yScale:p,top:g,left:Math.min(e,f)-m/2,width:Math.abs(f-e)-m,height:h-g}},hit:function(a){var b,c,d=a.data,e=a.args,f=e[0],g=e[1],h=a.xInverse(f.relX),i=a.yInverse(f.relY),j=this.getBarGeometry(h,i,a),k=j.width/2,l=j.left,m=j.y;for(c=d.length;c--;)b=this.getBarGeometry(d[c][0],d[c][1],a),(m>0&&m<b.y||0>m&&m>b.y)&&Math.abs(l-b.left)<k&&(g.x=d[c][0],g.y=d[c][1],g.index=c,g.seriesIndex=a.index)},drawHit:function(a){var b=a.context,c=a.args,d=this.getBarGeometry(c.x,c.y,a),e=d.left,f=d.top,g=d.width,h=d.height;b.save(),b.strokeStyle=a.color,b.lineWidth=a.lineWidth,this.translate(b,a.horizontal),b.beginPath(),b.moveTo(e,f+h),b.lineTo(e,f),b.lineTo(e+g,f),b.lineTo(e+g,f+h),a.fill&&(b.fillStyle=a.fillStyle,b.fill()),b.stroke(),b.closePath(),b.restore()},clearHit:function(a){var b=a.context,c=a.args,d=this.getBarGeometry(c.x,c.y,a),e=d.left,f=d.width,g=d.top,h=d.height,i=2*a.lineWidth;b.save(),this.translate(b,a.horizontal),b.clearRect(e-i,Math.min(g,g+h)-i,f+2*i,Math.abs(h)+2*i),b.restore()},extendXRange:function(a,b,c,d){this._extendRange(a,b,c,d),this.groups=this.groups+1||1,this.current=0},extendYRange:function(a,b,c,d){this._extendRange(a,b,c,d)},_extendRange:function(a,b,c){var d=a.options.max;if(!_.isNumber(d)&&!_.isString(d)){var e,f,g,h=a.min,i=a.max,j=c.horizontal,k=a.orientation,l=this.positiveSums||{},m=this.negativeSums||{};if((1==k&&!j||-1==k&&j)&&c.centered&&(i=Math.max(a.datamax+c.barWidth,i),h=Math.min(a.datamin-c.barWidth,h)),c.stacked&&(1==k&&j||-1==k&&!j))for(g=b.length;g--;)e=b[g][1==k?1:0]+"",f=b[g][1==k?0:1],f>0?(l[e]=(l[e]||0)+f,i=Math.max(i,l[e])):(m[e]=(m[e]||0)+f,h=Math.min(h,m[e]));(1==k&&j||-1==k&&!j)&&c.topPadding&&(a.max===a.datamax||c.stacked&&this.stackMax!==i)&&(i+=c.topPadding*(i-h)),this.stackMin=h,this.stackMax=i,this.negativeSums=m,this.positiveSums=l,a.max=i,a.min=h}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(a){var b=a.context,c=a.shadowSize;b.save(),b.lineWidth=a.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.plot(a,c/2),b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/4),b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a,b){var c,d,e=a.data,f=a.context;for(b=b||0,d=0;d<e.length;++d)c=this.getGeometry(e[d],a),f.beginPath(),f.arc(c.x+b,c.y+b,c.z,0,2*Math.PI,!0),f.stroke(),a.fill&&f.fill(),f.closePath()},getGeometry:function(a,b){return{x:b.xScale(a[0]),y:b.yScale(a[1]),z:a[2]*b.baseRadius}},hit:function(a){var b,c,d,e,f=a.data,g=a.args,h=g[0],j=g[1],k=h.relX,l=h.relY;for(j.best=j.best||Number.MAX_VALUE,i=f.length;i--;)c=this.getGeometry(f[i],a),d=c.x-k,e=c.y-l,b=Math.sqrt(d*d+e*e),b<c.z&&c.z<j.best&&(j.x=f[i][0],j.y=f[i][1],j.index=i,j.seriesIndex=a.index,j.best=c.z)},drawHit:function(a){var b=a.context,c=this.getGeometry(a.data[a.args.index],a);b.save(),b.lineWidth=a.lineWidth,b.fillStyle=a.fillStyle,b.strokeStyle=a.color,b.beginPath(),b.arc(c.x,c.y,c.z,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath(),b.restore()},clearHit:function(a){var b=a.context,c=this.getGeometry(a.data[a.args.index],a),d=c.z+a.lineWidth;b.save(),b.clearRect(c.x-d,c.y-d,2*d,2*d),b.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(a){var b=a.context;b.save(),b.lineJoin="miter",b.lineCap="butt",b.lineWidth=a.wickLineWidth||a.lineWidth,this.plot(a),b.restore()},plot:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=a.data,r=a.context,s=a.xScale,t=a.yScale,u=a.candleWidth/2,v=a.shadowSize,w=a.lineWidth,x=a.wickLineWidth,y=x%2/2;if(!(q.length<1))for(p=0;p<q.length;p++)c=q[p],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=s(d-u),j=s(d+u),k=t(g),l=t(f),m=t(Math.min(e,h)),n=t(Math.max(e,h)),b=a[e>h?"downFillColor":"upFillColor"],a.fill&&!a.barcharts&&(r.fillStyle="rgba(0,0,0,0.05)",r.fillRect(i+v,n+v,j-i,m-n),r.save(),r.globalAlpha=a.fillOpacity,r.fillStyle=b,r.fillRect(i,n+w,j-i,m-n),r.restore()),(w||x)&&(d=Math.floor((i+j)/2)+y,r.strokeStyle=b,r.beginPath(),a.barcharts?(r.moveTo(d,Math.floor(l+w)),r.lineTo(d,Math.floor(k+w)),o=h>e,r.moveTo(o?j:i,Math.floor(n+w)),r.lineTo(d,Math.floor(n+w)),r.moveTo(d,Math.floor(m+w)),r.lineTo(o?i:j,Math.floor(m+w))):(r.strokeRect(i,n+w,j-i,m-n),r.moveTo(d,Math.floor(n+w)),r.lineTo(d,Math.floor(l+w)),r.moveTo(d,Math.floor(m+w)),r.lineTo(d,Math.floor(k+w))),r.closePath(),r.stroke())},hit:function(a){var b,c,d,e,f,g,h,i,j=a.xScale,k=a.yScale,l=a.data,m=a.args,n=m[0],o=a.candleWidth/2,p=m[1],q=n.relX,r=n.relY,s=l.length;for(b=0;s>b;b++)if(c=l[b],d=c[2],e=c[3],f=j(c[0]-o),g=j(c[0]+o),i=k(e),h=k(d),q>f&&g>q&&r>h&&i>r)return p.x=c[0],p.index=b,void(p.seriesIndex=a.index)},drawHit:function(a){var b=a.context;b.save(),this.plot(_.defaults({fill:!!a.fillColor,upFillColor:a.color,downFillColor:a.color,data:[a.data[a.args.index]]},a)),b.restore()},clearHit:function(a){var b=a.args,c=a.context,d=a.xScale,e=a.yScale,f=a.lineWidth,g=a.candleWidth/2,h=a.data[b.index],i=d(h[0]-g)-f,j=d(h[0]+g)+f,k=e(h[2]),l=e(h[3])+f;c.clearRect(i,k,j-i,l-k)},extendXRange:function(a){null===a.options.max&&(a.max=Math.max(a.datamax+.5,a.max),a.min=Math.min(a.datamin-.5,a.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=this.ctx,c=a.gantt.barWidth,d=Math.min(a.gantt.lineWidth,c);if(b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=d,b.strokeStyle=a.color,b.save(),this.gantt.plotShadows(a,c,0,a.gantt.fill),b.restore(),a.gantt.fill){var e=a.gantt.fillColor||a.color;b.fillStyle=this.processColor(e,{opacity:a.gantt.fillOpacity})}this.gantt.plot(a,c,0,a.gantt.fill),b.restore()},plot:function(a,b,c,d){var e=a.data;if(!(e.length<1)){var f,g=a.xaxis,h=a.yaxis,i=this.ctx;for(f=0;f<e.length;f++){var j=e[f][0],k=e[f][1],l=e[f][2],m=!0,n=!0,o=!0;if(null!==k&&null!==l){var p=k,q=k+l,r=j-(a.gantt.centered?b/2:0),s=j+b-(a.gantt.centered?b/2:0);q<g.min||p>g.max||s<h.min||r>h.max||(p<g.min&&(p=g.min,m=!1),q>g.max&&(q=g.max,g.lastSerie!=a&&(n=!1)),r<h.min&&(r=h.min),s>h.max&&(s=h.max,h.lastSerie!=a&&(n=!1)),d&&(i.beginPath(),i.moveTo(g.d2p(p),h.d2p(r)+c),i.lineTo(g.d2p(p),h.d2p(s)+c),i.lineTo(g.d2p(q),h.d2p(s)+c),i.lineTo(g.d2p(q),h.d2p(r)+c),i.fill(),i.closePath()),a.gantt.lineWidth&&(m||o||n)&&(i.beginPath(),i.moveTo(g.d2p(p),h.d2p(r)+c),i[m?"lineTo":"moveTo"](g.d2p(p),h.d2p(s)+c),i[n?"lineTo":"moveTo"](g.d2p(q),h.d2p(s)+c),i[o?"lineTo":"moveTo"](g.d2p(q),h.d2p(r)+c),i.stroke(),i.closePath()))}}}},plotShadows:function(a,b){var c=a.data;if(!(c.length<1)){var d,e,f,g,h=a.xaxis,i=a.yaxis,j=this.ctx,k=this.options.shadowSize;for(d=0;d<c.length;d++)if(e=c[d][0],f=c[d][1],g=c[d][2],null!==f&&null!==g){var l=f,m=f+g,n=e-(a.gantt.centered?b/2:0),o=e+b-(a.gantt.centered?b/2:0);if(!(m<h.min||l>h.max||o<i.min||n>i.max)){l<h.min&&(l=h.min),m>h.max&&(m=h.max),n<i.min&&(n=i.min),o>i.max&&(o=i.max);var p=h.d2p(m)-h.d2p(l)-(h.d2p(m)+k<=this.plotWidth?0:k),q=i.d2p(n)-i.d2p(o)-(i.d2p(n)+k<=this.plotHeight?0:k);j.fillStyle="rgba(0,0,0,0.05)",j.fillRect(Math.min(h.d2p(l)+k,this.plotWidth),Math.min(i.d2p(o)+k,this.plotHeight),p,q)}}}},extendXRange:function(a){if(null===a.options.max){var b,c,d,e,f=a.min,g=a.max,h={},i=null;for(b=0;b<this.series.length;++b)if(d=this.series[b],e=d.gantt,e.show&&d.xaxis==a){for(c=0;c<d.data.length;c++)e.show&&(y=d.data[c][0]+"",h[y]=Math.max(h[y]||0,d.data[c][1]+d.data[c][2]),i=d);for(c in h)g=Math.max(h[c],g)}a.lastSerie=i,a.max=g,a.min=f}},extendYRange:function(a){if(null===a.options.max){var b,c,d,e,f=Number.MIN_VALUE,g=Number.MAX_VALUE,h=null;for(b=0;b<this.series.length;++b)if(d=this.series[b],e=d.gantt,e.show&&!d.hide&&d.yaxis==a){var i=Number.MIN_VALUE,j=Number.MAX_VALUE;for(c=0;c<d.data.length;c++)i=Math.max(i,d.data[c][0]),j=Math.min(j,d.data[c][0]);e.centered?(f=Math.max(i+.5,f),g=Math.min(j-.5,g)):(f=Math.max(i+1,f),g=Math.min(j,g)),e.barWidth+i>f&&(f=a.max+e.barWidth)}a.lastSerie=h,a.max=f,a.min=g,a.tickSize=Flotr.getTickSize(a.options.noTicks,g,f,a.options.tickDecimals)}}}),function(){function a(a){return"object"==typeof a&&a.constructor&&(Image?!0:a.constructor===Image)}Flotr.defaultMarkerFormatter=function(a){return Math.round(100*a.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(a){function b(a,b){return d=l.negative[a]||0,c=l.positive[a]||0,b>0?(l.positive[a]=d+b,d+b):(l.negative[a]=c+b,c+b)}var c,d,e,f,g,h,i,j=a.data,k=a.context,l=a.stacked?a.stack:!1,m=a.stackingType;for(k.save(),k.lineJoin="round",k.lineWidth=a.lineWidth,k.strokeStyle="rgba(0,0,0,0.5)",k.fillStyle=a.fillStyle,f=0;f<j.length;++f)g=j[f][0],h=j[f][1],l&&("b"==m?a.horizontal?h=b(h,g):g=b(g,h):"a"==m&&(e=l.values[g]||0,l.values[g]=e+h,h=e+h)),i=a.labelFormatter({x:g,y:h,index:f,data:j}),this.plot(a.xScale(g),a.yScale(h),i,a);k.restore()},plot:function(b,c,d,e){e.context;if(a(d)&&!d.complete)throw"Marker image not loaded.";this._plot(b,c,d,e)},_plot:function(b,c,d,e){var f,g=e.context,h=2,i=b,j=c;f=a(d)?{height:d.height,width:d.width}:e.text.canvas(d),f.width=Math.floor(f.width+2*h),f.height=Math.floor(f.height+2*h),-1!=e.position.indexOf("c")?i-=f.width/2+h:-1!=e.position.indexOf("l")&&(i-=f.width),-1!=e.position.indexOf("m")?j-=f.height/2+h:-1!=e.position.indexOf("t")?j-=f.height+e.verticalMargin:j+=e.verticalMargin,i=Math.floor(i)+.5,j=Math.floor(j)+.5,e.fill&&g.fillRect(i,j,f.width,f.height),e.stroke&&g.strokeRect(i,j,f.width,f.height),a(d)?g.drawImage(d,parseInt(i+h,10),parseInt(j+h,10)):Flotr.drawText(g,d,i+h,j+h,{textBaseline:"top",textAlign:"left",size:e.fontSize,color:e.color})}})}(),function(){Flotr._;Flotr.defaultPieLabelFormatter=function(a,b){return(100*b/a).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(a){var b,c,d,e=a.data,f=a.context,g=a.lineWidth,h=a.shadowSize,i=a.sizeRatio,j=a.height,k=a.width,l=a.explode,m=a.color,n=a.fill,o=a.fillStyle,p=Math.min(k,j)*i/2,q=e[0][1],r=[],s=1,t=2*Math.PI*q/this.total,u=this.startAngle||2*Math.PI*a.startAngle,v=u+t,w=u+t/2,x=a.labelFormatter(this.total,q),y=l+p+4,z=Math.cos(w)*y,A=Math.sin(w)*y,B=0>z?"right":"left",C=A>0?"top":"bottom";if(f.save(),f.translate(k/2,j/2),f.scale(1,s),c=Math.cos(w)*l,d=Math.sin(w)*l,h>0&&(this.plotSlice(c+h,d+h,p,u,v,f),n&&(f.fillStyle="rgba(0,0,0,0.1)",f.fill())),this.plotSlice(c,d,p,u,v,f),n&&(f.fillStyle=o,f.fill()),f.lineWidth=g,f.strokeStyle=m,f.stroke(),b={size:1.2*a.fontSize,color:a.fontColor,weight:1.5},x&&(a.htmlText||!a.textEnabled?(divStyle="position:absolute;"+C+":"+(j/2+("top"===C?A:-A))+"px;",divStyle+=B+":"+(k/2+("right"===B?-z:z))+"px;",r.push('<div style="',divStyle,'" class="flotr-grid-label">',x,"</div>")):(b.textAlign=B,b.textBaseline=C,Flotr.drawText(f,x,z,A,b))),a.htmlText||!a.textEnabled){var D=Flotr.DOM.node('<div style="color:'+a.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(D,r.join("")),Flotr.DOM.insert(a.element,D)}f.restore(),this.startAngle=v,this.slices=this.slices||[],this.slices.push({radius:p,x:c,y:d,explode:l,start:u,end:v})},plotSlice:function(a,b,c,d,e,f){f.beginPath(),f.moveTo(a,b),f.arc(a,b,c,d,e,!1),f.lineTo(a,b),f.closePath()},hit:function(a){var b=a.data[0],c=a.args,d=a.index,e=c[0],f=c[1],g=this.slices[d],h=e.relX-a.width/2,i=e.relY-a.height/2,j=Math.sqrt(h*h+i*i),k=Math.atan(i/h),l=2*Math.PI,m=g.explode||a.explode,n=g.start%l,o=g.end%l,p=a.epsilon;0>h?k+=Math.PI:h>0&&0>i&&(k+=l),j<g.radius+m&&j>m&&(k>n&&o>k||n>o&&(o>k||k>n)||n===o&&(g.start===g.end&&Math.abs(k-n)<p||g.start!==g.end&&Math.abs(k-n)>p))&&(f.x=b[0],f.y=b[1],f.sAngle=n,f.eAngle=o,f.index=0,f.seriesIndex=d,f.fraction=b[1]/this.total)
},drawHit:function(a){var b=a.context,c=this.slices[a.args.seriesIndex];b.save(),b.translate(a.width/2,a.height/2),this.plotSlice(c.x,c.y,c.radius,c.start,c.end,b),b.stroke(),b.restore()},clearHit:function(a){var b=a.context,c=this.slices[a.args.seriesIndex],d=2*a.lineWidth,e=c.radius+d;b.save(),b.translate(a.width/2,a.height/2),b.clearRect(c.x-e,c.y-e,2*e+d,2*e+d),b.restore()},extendYRange:function(a,b){this.total=(this.total||0)+b[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(a){var b=a.context,c=(a.lineWidth,a.shadowSize);b.save(),c>0&&(b.lineWidth=c/2,b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/2+b.lineWidth/2),b.strokeStyle="rgba(0,0,0,0.2)",this.plot(a,b.lineWidth/2)),b.lineWidth=a.lineWidth,b.strokeStyle=a.color,a.fill&&(b.fillStyle=a.fillStyle),this.plot(a),b.restore()},plot:function(a,b){var c,d,e,f=a.data,g=a.context,h=a.xScale,i=a.yScale;for(c=f.length-1;c>-1;--c)e=f[c][1],null!==e&&(d=h(f[c][0]),e=i(e),0>d||d>a.width||0>e||e>a.height||(g.beginPath(),b?g.arc(d,e+b,a.radius,0,Math.PI,!1):(g.arc(d,e,a.radius,0,2*Math.PI,!0),a.fill&&g.fill()),g.stroke(),g.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(a){var b=a.context,c=a.shadowSize;b.save(),b.translate(a.width/2,a.height/2),b.lineWidth=a.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.plot(a,c/2),b.strokeStyle="rgba(0,0,0,0.1)",this.plot(a,c/4),b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a,b){var c,d,e=a.data,f=a.context,g=Math.min(a.height,a.width)*a.radiusRatio/2,h=2*Math.PI/e.length,i=-Math.PI/2;for(b=b||0,f.beginPath(),c=0;c<e.length;++c)d=e[c][1]/this.max,f[0===c?"moveTo":"lineTo"](Math.cos(c*h+i)*g*d+b,Math.sin(c*h+i)*g*d+b);f.closePath(),a.fill&&f.fill(),f.stroke()},getGeometry:function(a,b){var c=Math.min(b.height,b.width)*b.radiusRatio/2,d=2*Math.PI/b.data.length,e=-Math.PI/2,f=a[1]/this.max;return{x:Math.cos(a[0]*d+e)*c*f+b.width/2,y:Math.sin(a[0]*d+e)*c*f+b.height/2}},hit:function(a){for(var b,c,d,e,f=a.args,g=f[0],h=f[1],i=g.relX,j=g.relY,k=0;k<h.series.length;k++)for(var l=h.series[k],m=l.data,n=m.length;n--;)if(c=this.getGeometry(m[n],a),d=c.x-i,e=c.y-j,b=Math.sqrt(d*d+e*e),b<2*a.sensibility)return h.x=m[n][0],h.y=m[n][1],h.index=n,h.seriesIndex=k,h},drawHit:function(a){var b=2*Math.PI/a.data.length,c=-Math.PI/2,d=Math.min(a.height,a.width)*a.radiusRatio/2,e=a.args.series,f=e.points.hitRadius||e.points.radius||e.mouse.radius,g=a.context;g.translate(a.width/2,a.height/2);var h=a.args.index,i=a.data[h][1]/this.max,j=Math.cos(h*b+c)*d*i,k=Math.sin(h*b+c)*d*i;g.beginPath(),g.arc(j,k,f,0,2*Math.PI,!0),g.closePath(),g.stroke()},clearHit:function(a){var b=2*Math.PI/a.data.length,c=-Math.PI/2,d=Math.min(a.height,a.width)*a.radiusRatio/2,e=a.context,f=a.args.series,g=f.points?f.points.lineWidth:1;offset=(f.points.hitRadius||f.points.radius||f.mouse.radius)+g,e.translate(a.width/2,a.height/2);var h=a.args.index,i=a.data[h][1]/this.max,j=Math.cos(h*b+c)*d*i,k=Math.sin(h*b+c)*d*i;e.clearRect(j-offset,k-offset,2*offset,2*offset)},extendYRange:function(a){this.max=Math.max(a.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=a.context;b.save(),b.lineJoin="miter",b.lineWidth=a.lineWidth,b.strokeStyle=a.color,b.fillStyle=a.fillStyle,this.plot(a),b.restore()},plot:function(a){var b=a.data,c=a.context,d=a.xScale,e=a.yScale,f=a.barWidth,g=a.lineWidth;Flotr._.each(b,function(a){var b=a[0],h=a[1],i=a[2],j=f,k=Math.ceil(d(b)),l=Math.ceil(d(b+i))-k,m=Math.round(e(h)),n=Math.round(e(h-j))-m,o=k-g/2,p=Math.round(m-n/2)-g/2;c.strokeRect(o,p,l,n),c.fillRect(o,p,l,n)})},extendRange:function(a){var b=a.data,c=a.xaxis,d=a.yaxis,e=a.timeline.barWidth;if(null===c.options.min&&(c.min=c.datamin-e/2),null===c.options.max){var f=c.max;Flotr._.each(b,function(a){f=Math.max(f,a[0]+a[2])},this),c.max=f+e/2}null===d.options.min&&(d.min=d.datamin-e),null===d.options.min&&(d.max=d.datamax+e)}}),function(){var a=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(a,b){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(b))}},drawCrosshair:function(b){var c=this.octx,d=this.options.crosshair,e=this.plotOffset,f=e.left+Math.round(b.relX)+.5,g=e.top+Math.round(b.relY)+.5;return b.relX<0||b.relY<0||b.relX>this.plotWidth||b.relY>this.plotHeight?(this.el.style.cursor=null,void a.removeClass(this.el,"flotr-crosshair")):(d.hideCursor&&(this.el.style.cursor="none",a.addClass(this.el,"flotr-crosshair")),c.save(),c.strokeStyle=d.color,c.lineWidth=1,c.beginPath(),-1!=d.mode.indexOf("x")&&(c.moveTo(f,e.top),c.lineTo(f,e.top+this.plotHeight)),-1!=d.mode.indexOf("y")&&(c.moveTo(e.left,g),c.lineTo(e.left+this.plotWidth,g)),c.stroke(),void c.restore())},clearCrosshair:function(){var a=this.plotOffset,b=this.lastMousePos,c=this.octx;b&&(c.clearRect(Math.round(b.relX)+a.left,a.top,1,this.plotHeight+1),c.clearRect(a.left,Math.round(b.relY)+a.top,this.plotWidth+1,1))}})}(),function(){function a(a,b,c,d,e,f){var g="image/"+a,h=c.getImageData(0,0,d,e),i=new Image;return c.save(),c.globalCompositeOperation="destination-over",c.fillStyle=f,c.fillRect(0,0,d,e),i.src=b.toDataURL(g),c.restore(),c.clearRect(0,0,d,e),c.putImageData(h,0,0),i}var b=Flotr.DOM,c=Flotr._;Flotr.addPlugin("download",{saveImage:function(d,e,f,g){var h,i=this.options.grid;if(Flotr.isIE&&Flotr.isIE<9)return h="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(h);if("jpeg"===d||"png"===d)return h=a(d,this.canvas,this.ctx,this.canvasWidth,this.canvasHeight,i&&i.backgroundColor||"#ffffff"),c.isElement(h)&&g?(this.download.restoreCanvas(),b.hide(this.canvas),b.hide(this.overlay),b.setStyles({position:"absolute"}),b.insert(this.el,h),this.saveImageElement=h,void 0):window.open(h.src)},restoreCanvas:function(){b.show(this.canvas),b.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var a=Flotr.EventAdapter,b=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function c(a){for(h=0;h<a.length;++h){var b=a[h].v/g.max;for(i=0;t>=i;++i)j[0===i?"moveTo":"lineTo"](Math.cos(i*u+v)*s*b,Math.sin(i*u+v)*s*b)}}function d(a,c){b.each(b.pluck(a,"v"),function(a){a<=g.min||a>=g.max||(a==g.min||a==g.max)&&l.outlineWidth||c(Math.floor(g.d2p(a))+j.lineWidth/2)})}function e(a){j.moveTo(a,0),j.lineTo(a,q)}function f(a){j.moveTo(0,a),j.lineTo(r,a)}var g,h,i,j=this.ctx,k=this.options,l=k.grid,m=l.verticalLines,n=l.horizontalLines,o=l.minorVerticalLines,p=l.minorHorizontalLines,q=this.plotHeight,r=this.plotWidth;if((m||o||n||p)&&a.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,k,this]),j.save(),j.lineWidth=1,j.strokeStyle=l.tickColor,l.circular){j.translate(this.plotOffset.left+r/2,this.plotOffset.top+q/2);var s=Math.min(q,r)*k.radar.radiusRatio/2,t=this.axes.x.ticks.length,u=2*(Math.PI/t),v=-Math.PI/2;j.beginPath(),g=this.axes.y,n&&c(g.ticks),p&&c(g.minorTicks),m&&b.times(t,function(a){j.moveTo(0,0),j.lineTo(Math.cos(a*u+v)*s,Math.sin(a*u+v)*s)}),j.stroke()}else j.translate(this.plotOffset.left,this.plotOffset.top),l.backgroundColor&&(j.fillStyle=this.processColor(l.backgroundColor,{x1:0,y1:0,x2:r,y2:q}),j.fillRect(0,0,r,q)),j.beginPath(),g=this.axes.x,m&&d(g.ticks,e),o&&d(g.minorTicks,e),g=this.axes.y,n&&d(g.ticks,f),p&&d(g.minorTicks,f),j.stroke();j.restore(),(m||o||n||p)&&a.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,k,this])},drawOutline:function(){var a,b,c,d,e=this,f=e.options,g=f.grid,h=g.outline,j=e.ctx,k=g.backgroundImage,l=e.plotOffset,m=l.left,n=l.top,o=e.plotWidth,p=e.plotHeight;if(g.outlineWidth){if(j.save(),g.circular){j.translate(m+o/2,n+p/2);var q=Math.min(p,o)*f.radar.radiusRatio/2,r=this.axes.x.ticks.length,s=2*(Math.PI/r),t=-Math.PI/2;for(j.beginPath(),j.lineWidth=g.outlineWidth,j.strokeStyle=g.color,j.lineJoin="round",i=0;r>=i;++i)j[0===i?"moveTo":"lineTo"](Math.cos(i*s+t)*q,Math.sin(i*s+t)*q);j.stroke()}else{j.translate(m,n);var u=g.outlineWidth,v=.5-u+(u+1)%2/2,w="lineTo",x="moveTo";j.lineWidth=u,j.strokeStyle=g.color,j.lineJoin="miter",j.beginPath(),j.moveTo(v,v),o-=u/2%1,p+=u/2,j[-1!==h.indexOf("n")?w:x](o,v),j[-1!==h.indexOf("e")?w:x](o,p),j[-1!==h.indexOf("s")?w:x](v,p),j[-1!==h.indexOf("w")?w:x](v,v),j.stroke(),j.closePath()}j.restore(),k&&(b=k.src||k,c=(parseInt(k.left,10)||0)+l.left,d=(parseInt(k.top,10)||0)+l.top,a=new Image,a.onload=function(){j.save(),k.alpha&&(j.globalAlpha=k.alpha),j.globalCompositeOperation="destination-over",j.drawImage(a,0,0,a.width,a.height,c,d,o,p),j.restore()},a.src=b)}}})}(),function(){var a=Flotr.DOM,b=Flotr._,c=Flotr,d="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(a,b){this.hit.track(b)},"flotr:click":function(a){var c=this.hit.track(a);c&&!b.isUndefined(c.index)&&(a.hit=c)},"flotr:mouseout":function(a){a.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&a.remove(this.mouseTrack),this.mouseTrack=null}},track:function(a){return this.options.mouse.track||b.any(this.series,function(a){return a.mouse&&a.mouse.track})?this.hit.hit(a):void 0},executeOnType:function(a,d,e){function f(a,f){b.each(b.keys(c.graphTypes),function(b){a[b]&&a[b].show&&!a.hide&&this[b][d]&&(g=this.getOptions(a,b),g.fill=!!a.mouse.fillColor,g.fillStyle=this.processColor(a.mouse.fillColor||"#ffffff",{opacity:a.mouse.fillOpacity}),g.color=a.mouse.lineColor,g.context=this.octx,g.index=f,e&&(g.args=e),this[b][d].call(this[b],g),h=!0)},this)}var g,h=!1;return b.isArray(a)||(a=[a]),b.each(a,f,this),h},drawHit:function(a){var b=this.octx,c=a.series;if(c.mouse.lineColor){if(b.save(),b.lineWidth=c.points?c.points.lineWidth:1,b.strokeStyle=c.mouse.lineColor,b.fillStyle=this.processColor(c.mouse.fillColor||"#ffffff",{opacity:c.mouse.fillOpacity}),b.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(c,"drawHit",a)){var d=a.xaxis,e=a.yaxis;b.beginPath(),b.arc(d.d2p(a.x),e.d2p(a.y),c.points.hitRadius||c.points.radius||c.mouse.radius,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath()}b.restore(),this.clip(b)}this.prevHit=a},clearHit:function(){var b=this.prevHit,c=this.octx,d=this.plotOffset;if(c.save(),c.translate(d.left,d.top),b){if(!this.hit.executeOnType(b.series,"clearHit",this.prevHit)){var e=b.series,f=e.points?e.points.lineWidth:1;offset=(e.points.hitRadius||e.points.radius||e.mouse.radius)+f,c.clearRect(b.xaxis.d2p(b.x)-offset,b.yaxis.d2p(b.y)-offset,2*offset,2*offset)}a.hide(this.mouseTrack),this.prevHit=null}c.restore()},hit:function(a){var c,d,e,f,g,h,i,j=this.options,k=this.prevHit;if(0!==this.series.length)return i={relX:a.relX,relY:a.relY,absX:a.absX,absY:a.absY,series:this.series},j.mouse.trackY&&!j.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[a,i])&&!b.isUndefined(i.seriesIndex)?(f=this.series[i.seriesIndex],i.series=f,i.mouse=f.mouse,i.xaxis=f.xaxis,i.yaxis=f.yaxis):(c=this.hit.closest(a),c&&(c=j.mouse.trackY?c.point:c.x,e=c.seriesIndex,f=this.series[e],g=f.xaxis,h=f.yaxis,d=2*f.mouse.sensibility,(j.mouse.trackAll||c.distanceX<d/g.scale&&(!j.mouse.trackY||c.distanceY<d/h.scale))&&(i.series=f,i.xaxis=f.xaxis,i.yaxis=f.yaxis,i.mouse=f.mouse,i.x=c.x,i.y=c.y,i.dist=c.distance,i.index=c.dataIndex,i.seriesIndex=e))),k&&k.index===i.index&&k.seriesIndex===i.seriesIndex||(this.hit.clearHit(),i.series&&i.mouse&&i.mouse.track&&(this.hit.drawMouseTrack(i),this.hit.drawHit(i),Flotr.EventAdapter.fire(this.el,"flotr:hit",[i,this]))),i},closest:function(a){function b(a){a.distance=e,a.distanceX=f,a.distanceY=g,a.seriesIndex=l,a.dataIndex=m,a.x=j,a.y=k,u=!0}var c,d,e,f,g,h,i,j,k,l,m,n=this.series,o=(this.options,a.relX),p=a.relY,q=Number.MAX_VALUE,r=Number.MAX_VALUE,s={},t={},u=!1;for(l=0;l<n.length;l++)if(c=n[l],d=c.data,h=c.xaxis.p2d(o),i=c.yaxis.p2d(p),!c.hide)for(m=d.length;m--;)j=d[m][0],k=d[m][1],d[m].y0&&(k+=d[m].y0),null!==j&&null!==k&&(j<c.xaxis.min||j>c.xaxis.max||(f=Math.abs(j-h),g=Math.abs(k-i),e=f*f+g*g,q>e&&(q=e,b(s)),r>f&&(r=f,b(t))));return u?{point:s,x:t}:!1},drawMouseTrack:function(c){var e,f,g,h="",i=c.series,j=c.mouse.position,k=c.mouse.margin,l=c.x,m=c.y,n=d,o=this.mouseTrack,p=this.plotOffset,q=p.left,r=(p.right,p.bottom,p.top),s=c.mouse.trackDecimals,t=this.options,u=t.mouse.container,v=0,w=0;if(o||(o=a.node('<div class="flotr-mouse-value" style="'+n+'"></div>'),this.mouseTrack=o,a.insert(u||this.el,o)),(!s||0>s)&&(s=0),l&&l.toFixed&&(l=l.toFixed(s)),m&&m.toFixed&&(m=m.toFixed(s)),g=c.mouse.trackFormatter({x:l,y:m,series:c.series,index:c.index,nearest:c,fraction:c.fraction}),b.isNull(g)||b.isUndefined(g))return void a.hide(o);if(o.innerHTML=g,a.show(o),j){if(f=a.size(o),u&&(e=a.position(this.el),v=e.top,w=e.left),c.mouse.relative)if(i.pie&&i.pie.show){var x={x:this.plotWidth/2,y:this.plotHeight/2},y=Math.min(this.canvasWidth,this.canvasHeight)*i.pie.sizeRatio/2,z=c.sAngle<c.eAngle?(c.sAngle+c.eAngle)/2:(c.sAngle+c.eAngle+2*Math.PI)/2;h+="bottom:"+(k-r-x.y-Math.sin(z)*y/2+this.canvasHeight)+"px;top:auto;",h+="left:"+(k+q+x.x+Math.cos(z)*y/2)+"px;right:auto;"}else h+="top:",h+=/n/.test(j)?v-k+r+c.yaxis.d2p(c.y)-f.height:v+k+r+c.yaxis.d2p(c.y),h+="px;bottom:auto;left:",h+=/w/.test(j)?w-k+q+c.xaxis.d2p(c.x)-f.width:w+k+q+c.xaxis.d2p(c.x),h+="px;right:auto;";else h+="top:","n"==j.charAt(0)?h+=v+k+r:"s"==j.charAt(0)&&(h+=v-k+r+this.plotHeight-f.height),h+="px;bottom:auto;left:","e"==j.charAt(1)?h+=w-k+q+this.plotWidth-f.width:"w"==j.charAt(1)&&(h+=w+k+q),h+="px;right:auto;";o.style.cssText=n+h,c.mouse.relative&&(/[ew]/.test(j)?/[ns]/.test(j)||(o.style.top=v+r+c.yaxis.d2p(c.y)-a.size(o).height/2+"px"):o.style.left=w+q+c.xaxis.d2p(c.x)-a.size(o).width/2+"px")}}})}(),function(){function a(a){return a.which?1===a.which:0===a.button||1===a.button}function b(a,b){return Math.min(Math.max(0,a),b.plotWidth-1)}function c(a,b){return Math.min(Math.max(0,a),b.plotHeight)}var d=(Flotr.DOM,Flotr.EventAdapter),e=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(a){var b=this.options.selection,c=this.selection,d=this.getEventPosition(a);b&&b.mode&&(c.interval&&clearInterval(c.interval),this.multitouches?c.updateSelection():b.pinchOnly||c.setSelectionPos(c.selection.second,d),c.clearSelection(),c.selecting&&c.selectionIsSane()&&(c.drawSelection(),c.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(b){var c=this.options.selection,d=this.selection,f=this.getEventPosition(b);c&&c.mode&&(!c.mode||!a(b)&&e.isUndefined(b.touches)||(c.pinchOnly||d.setSelectionPos(d.selection.first,f),d.interval&&clearInterval(d.interval),this.lastMousePos.pageX=null,d.selecting=!1,d.interval=setInterval(e.bind(d.updateSelection,this),1e3/c.fps)))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){{var a,b,c,d,e=this.selection.selection,f=this.axes;e.first,e.second}return a=f.x.p2d(e.first.x),b=f.x.p2d(e.second.x),c=f.y.p2d(e.first.y),d=f.y.p2d(e.second.y),{x1:Math.min(a,b),y1:Math.min(c,d),x2:Math.max(a,b),y2:Math.max(c,d),xfirst:a,xsecond:b,yfirst:c,ysecond:d}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(a){var b=this.selection.getArea();a=a||"select",b.selection=this.selection.selection,d.fire(this.el,"flotr:"+a,[b,this])},setSelection:function(a,d){var e=this.options,f=this.axes.x,g=this.axes.y,h=g.scale,i=f.scale,j=-1!=e.selection.mode.indexOf("x"),k=-1!=e.selection.mode.indexOf("y"),l=this.selection.selection;this.selection.clearSelection(),l.first.y=c(j&&!k?0:(g.max-a.y1)*h,this),l.second.y=c(j&&!k?this.plotHeight-1:(g.max-a.y2)*h,this),l.first.x=b(k&&!j?0:(a.x1-f.min)*i,this),l.second.x=b(k&&!j?this.plotWidth:(a.x2-f.min)*i,this),this.selection.drawSelection(),d||this.selection.fireSelectEvent()},setSelectionPos:function(a,d){var e=this.options.selection.mode,f=this.selection.selection;a.x=-1==e.indexOf("x")?a==f.first?0:this.plotWidth:b(d.relX,this),a.y=-1==e.indexOf("y")?a==f.first?0:this.plotHeight-1:c(d.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var a=this.selection.selection,b=this.octx,c=this.options,d=this.plotOffset,e=this.selection.prevSelection;if(!e||a.first.x!=e.first.x||a.first.y!=e.first.y||a.second.x!=e.second.x||a.second.y!=e.second.y){b.save(),b.strokeStyle=this.processColor(c.selection.color,{opacity:.8}),b.lineWidth=1,b.lineJoin="miter",b.fillStyle=this.processColor(c.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:a.first.x,y:a.first.y},second:{x:a.second.x,y:a.second.y}};var f=Math.min(a.first.x,a.second.x),g=Math.min(a.first.y,a.second.y),h=Math.abs(a.second.x-a.first.x),i=Math.abs(a.second.y-a.first.y);b.fillRect(f+d.left+.5,g+d.top+.5,h,i),b.strokeRect(f+d.left+.5,g+d.top+.5,h,i),b.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var a=this.selection.prevSelection,b=1,c=this.plotOffset,d=Math.min(a.first.x,a.second.x),e=Math.min(a.first.y,a.second.y),f=Math.abs(a.second.x-a.first.x),g=Math.abs(a.second.y-a.first.y);this.octx.clearRect(d+c.left-b+.5,e+c.top-b,f+2*b+.5,g+2*b+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var a=this.selection.selection;return Math.abs(a.second.x-a.first.x)>=5||Math.abs(a.second.y-a.first.y)>=5}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function b(a,b,c){{var d,f=c?b.minorTicks:b.ticks,h=1===b.orientation;1===b.n}for(d={color:b.options.color||o.grid.color,angle:Flotr.toRad(b.options.labelsAngle),textBaseline:"middle"},l=0;l<f.length&&(c?b.options.showMinorLabels:b.options.showLabels);++l)e=f[l],e.label+="",e.label&&e.label.length&&(x=Math.cos(l*i+j)*g,y=Math.sin(l*i+j)*g,d.textAlign=h?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(p,e.label,h?x:3,h?y:-(b.ticks[l].v/b.max)*(g-o.fontSize),d))}function c(a,b,c,d){function f(a){return a.options.showLabels&&a.used}function g(a,b,c,d){return a.plotOffset.left+(b?d:c?-o.grid.labelMargin:o.grid.labelMargin+a.plotWidth)}function h(a,b,c,d){return a.plotOffset.top+(b?o.grid.labelMargin:d)+(b&&c?a.plotHeight:0)}var i,j,k=1===b.orientation,m=1===b.n;for(i={color:b.options.color||o.grid.color,textAlign:c,textBaseline:d,angle:Flotr.toRad(b.options.labelsAngle)},i=Flotr.getBestTextAlign(i.angle,i),l=0;l<b.ticks.length&&f(b);++l)e=b.ticks[l],e.label&&e.label.length&&(j=b.d2p(e.v),0>j||j>(k?a.plotWidth:a.plotHeight)||(Flotr.drawText(p,e.label,g(a,k,m,j),h(a,k,m,j),i),k||m||(p.save(),p.strokeStyle=i.color,p.beginPath(),p.moveTo(a.plotOffset.left+a.plotWidth-8,a.plotOffset.top+b.d2p(e.v)),p.lineTo(a.plotOffset.left+a.plotWidth,a.plotOffset.top+b.d2p(e.v)),p.stroke(),p.restore())))}function d(a,b){var c,d,g=1===b.orientation,h=1===b.n,i="",j=a.plotOffset;if(g||h||(p.save(),p.strokeStyle=b.options.color||o.grid.color,p.beginPath()),b.options.showLabels&&(h?!0:b.used))for(l=0;l<b.ticks.length;++l)e=b.ticks[l],!e.label||!e.label.length||(g?j.left:j.top)+b.d2p(e.v)<0||(g?j.left:j.top)+b.d2p(e.v)>(g?a.canvasWidth:a.canvasHeight)||(d=j.top+(g?(h?1:-1)*(a.plotHeight+o.grid.labelMargin):b.d2p(e.v)-b.maxLabel.height/2),c=g?j.left+b.d2p(e.v)-f/2:0,i="",0===l?i=" first":l===b.ticks.length-1&&(i=" last"),i+=g?" flotr-grid-label-x":" flotr-grid-label-y",m+=['<div style="position:absolute; text-align:'+(g?"center":"right")+"; ","top:"+d+"px; ",(g||h?"left:":"right:")+c+"px; ","width:"+(g?f:(h?j.left:j.right)-o.grid.labelMargin)+"px; ",b.options.color?"color:"+b.options.color+"; ":" ",'" class="flotr-grid-label'+i+'">'+e.label+"</div>"].join(" "),g||h||(p.moveTo(j.left+a.plotWidth-8,j.top+b.d2p(e.v)),p.lineTo(j.left+a.plotWidth,j.top+b.d2p(e.v))))}{var e,f,g,h,i,j,k,l,m="",n=0,o=this.options,p=this.ctx,q=this.axes;({size:o.fontSize})}for(l=0;l<q.x.ticks.length;++l)q.x.ticks[l].label&&++n;f=this.plotWidth/n,o.grid.circular&&(p.save(),p.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),g=this.plotHeight*o.radar.radiusRatio/2+o.fontSize,h=this.axes.x.ticks.length,i=2*(Math.PI/h),j=-Math.PI/2,b(this,q.x,!1),b(this,q.x,!0),b(this,q.y,!1),b(this,q.y,!0),p.restore()),!o.HtmlText&&this.textEnabled?(c(this,q.x,"center","top"),c(this,q.x2,"center","bottom"),c(this,q.y,"right","middle"),c(this,q.y2,"left","middle")):(q.x.options.showLabels||q.x2.options.showLabels||q.y.options.showLabels||q.y2.options.showLabels)&&!o.grid.circular&&(m="",d(this,q.x),d(this,q.x2),d(this,q.y),d(this,q.y2),p.stroke(),p.restore(),k=a.create("div"),a.setStyles(k,{fontSize:"smaller",color:o.grid.color}),k.className="flotr-labels",a.insert(this.el,k),a.insert(k,m))}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(a){return a},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var b=this.legend.markup;b&&(this.legend.markup=null,a.remove(b))}},insertLegend:function(){if(this.options.legend.show){var c,d,e,f=this.series,g=this.plotOffset,h=this.options,i=h.legend,j=[],k=!1,l=this.ctx,m=b.filter(f,function(a){return a.label&&!a.hide}).length,n=i.position,o=i.margin,p=i.backgroundOpacity;if(m){var q=i.labelBoxWidth,r=i.labelBoxHeight,s=i.labelBoxMargin,t=g.left+o,u=g.top+o,v=0,w={size:1.1*h.fontSize,color:h.grid.color};for(c=f.length-1;c>-1;--c)f[c].label&&!f[c].hide&&(d=i.labelFormatter(f[c].label),v=Math.max(v,this._text.measureText(d,w).width));var x=Math.round(q+3*s+v),y=Math.round(m*(s+r)+s);if(p||0===p||(p=.1),h.HtmlText||!this.textEnabled||i.container){for(c=0;c<f.length;++c)if(f[c].label&&!f[c].hide){c%i.noColumns===0&&(j.push(k?"</tr><tr>":"<tr>"),k=!0);var z=f[c],A=i.labelBoxWidth,B=i.labelBoxHeight;d=i.labelFormatter(z.label),e="background-color:"+(z.bars&&z.bars.show&&z.bars.fillColor&&z.bars.fill?z.bars.fillColor:z.color)+";",j.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',i.labelBoxBorderColor,';padding:1px">','<div style="width:',A-1,"px;height:",B-1,"px;border:1px solid ",f[c].color,'">','<div style="width:',A,"px;height:",B,"px;",e,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',d,"</td>")}if(k&&j.push("</tr>"),j.length>0){var C='<table style="font-size:smaller;color:'+h.grid.color+'">'+j.join("")+"</table>";if(i.container)C=a.node(C),this.legend.markup=C,a.insert(i.container,C);else{var D={position:"absolute",zIndex:"2",border:"1px solid "+i.labelBoxBorderColor};"n"==n.charAt(0)?(D.top=o+g.top+"px",D.bottom="auto"):"c"==n.charAt(0)?(D.top=o+(this.plotHeight-y)/2+"px",D.bottom="auto"):"s"==n.charAt(0)&&(D.bottom=o+g.bottom+"px",D.top="auto"),"e"==n.charAt(1)?(D.right=o+g.right+"px",D.left="auto"):"w"==n.charAt(1)&&(D.left=o+g.left+"px",D.right="auto");var E=a.create("div");if(E.className="flotr-legend",a.setStyles(E,D),a.insert(E,C),a.insert(this.el,E),!p)return;var F=i.backgroundColor||h.grid.backgroundColor||"#ffffff";b.extend(D,a.size(E),{backgroundColor:F,zIndex:"",border:""}),D.width+="px",D.height+="px",E=a.create("div"),E.className="flotr-legend-bg",a.setStyles(E,D),a.opacity(E,p),a.insert(E," "),a.insert(this.el,E)}}}else{"s"==n.charAt(0)&&(u=g.top+this.plotHeight-(o+y)),"c"==n.charAt(0)&&(u=g.top+this.plotHeight/2-(o+y/2)),"e"==n.charAt(1)&&(t=g.left+this.plotWidth-(o+x)),e=this.processColor(i.backgroundColor,{opacity:p}),l.fillStyle=e,l.fillRect(t,u,x,y),l.strokeStyle=i.labelBoxBorderColor,l.strokeRect(Flotr.toPixel(t),Flotr.toPixel(u),x,y);var G=t+s,H=u+s;for(c=0;c<f.length;c++)f[c].label&&!f[c].hide&&(d=i.labelFormatter(f[c].label),l.fillStyle=f[c].color,l.fillRect(G,H,q-1,r-1),l.strokeStyle=i.labelBoxBorderColor,l.lineWidth=1,l.strokeRect(Math.ceil(G)-1.5,Math.ceil(H)-1.5,q+2,r+2),Flotr.drawText(l,d,G+q+s,H+r,w),H+=r+s)}}}}})}(),function(){function a(a){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(a);var b=c.find(this.axes.x.ticks,function(b){return b.v==a});return b?b.label:a}var b=Flotr.DOM,c=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var a,c=this.spreadsheet,d=b.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),e=b.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),f=b.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");c.tabsContainer=d,c.tabs={graph:e,data:f},b.insert(d,e),b.insert(d,f),b.insert(this.el,d),a=b.size(f).height+2,this.plotOffset.bottom+=a,b.setStyles(d,{top:this.canvasHeight-a+"px"}),this.observe(e,"click",function(){c.showTab("graph")}).observe(f,"click",function(){c.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&c.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var a=this.series,b={};return c.each(a,function(a,d){c.each(a.data,function(a){var c=a[0],e=a[1],f=b[c];if(f)f[d+1]=e;else{var g=[];g[0]=c,g[d+1]=e,b[c]=g}})}),this.seriesData=c.sortBy(b,function(a,b){return parseInt(b,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var d,e,f,g=this.series,h=this.spreadsheet.loadDataGrid(),i=["<colgroup><col />"],j=['<table class="flotr-datagrid"><tr class="first-row">'];j.push("<th>&nbsp;</th>"),c.each(g,function(a,b){j.push('<th scope="col">'+(a.label||String.fromCharCode(65+b))+"</th>"),i.push("<col />")}),j.push("</tr>"),c.each(h,function(b){j.push("<tr>"),c.times(g.length+1,function(d){var e="td",f=b[d],g=c.isUndefined(f)?"":Math.round(1e5*f)/1e5;if(0===d){e="th";var h=a.call(this,g);h&&(g=h)}j.push("<"+e+("th"==e?' scope="row"':"")+">"+g+"</"+e+">")},this),j.push("</tr>")},this),i.push("</colgroup>"),f=b.node(j.join("")),d=b.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),e=b.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(d,"click",c.bind(this.spreadsheet.downloadCSV,this)).observe(e,"click",c.bind(this.spreadsheet.selectAllData,this));var k=b.node('<div class="flotr-datagrid-toolbar"></div>');b.insert(k,d),b.insert(k,e);var l=this.canvasHeight-b.size(this.spreadsheet.tabsContainer).height-2,m=b.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+l+'px;overflow:auto;z-index:10"></div>');return b.insert(m,k),b.insert(m,f),b.insert(this.el,m),this.spreadsheet.datagrid=f,this.spreadsheet.container=m,f},showTab:function(a){if(this.spreadsheet.activeTab!==a){switch(a){case"graph":b.hide(this.spreadsheet.container),b.removeClass(this.spreadsheet.tabs.data,"selected"),b.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),b.show(this.spreadsheet.container),b.addClass(this.spreadsheet.tabs.data,"selected"),b.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+a}this.spreadsheet.activeTab=a}},selectAllData:function(){if(this.spreadsheet.tabs){var a,b,c,d,e=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(c=e.ownerDocument)&&(d=c.defaultView)&&d.getSelection&&c.createRange&&(a=window.getSelection())&&a.removeAllRanges?(b=c.createRange(),b.selectNode(e),a.removeAllRanges(),a.addRange(b)):document.body&&document.body.createTextRange&&(b=document.body.createTextRange())&&(b.moveToElementText(e),b.select())},0),!0}return!1},downloadCSV:function(){var b="",d=this.series,e=this.options,f=this.spreadsheet.loadDataGrid(),g=encodeURIComponent(e.spreadsheet.csvFileSeparator);if(e.spreadsheet.decimalSeparator===e.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+e.spreadsheet.decimalSeparator+")";c.each(d,function(a,c){b+=g+'"'+(a.label||String.fromCharCode(65+c)).replace(/\"/g,'\\"')+'"'}),b+="%0D%0A",b+=c.reduce(f,function(b,c){var d=a.call(this,c[0])||"";d='"'+(d+"").replace(/\"/g,'\\"')+'"';var f=c.slice(1).join(g);return"."!==e.spreadsheet.decimalSeparator&&(f=f.replace(/\./g,e.spreadsheet.decimalSeparator)),b+d+g+f+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(b=b.replace(new RegExp(g,"g"),decodeURIComponent(g)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(b)):window.open("data:text/csv,"+b)}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var b,c=this.options,d=c.grid.labelMargin,e=this.ctx,f=this.axes;if(!c.HtmlText&&this.textEnabled){var g={size:c.fontSize,color:c.grid.color,textAlign:"center"};c.subtitle&&Flotr.drawText(e,c.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,g),g.weight=1.5,g.size*=1.5,c.title&&Flotr.drawText(e,c.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,g),g.weight=1.8,g.size*=.8,f.x.options.title&&f.x.used&&(g.textAlign=f.x.options.titleAlign||"center",g.textBaseline="top",g.angle=Flotr.toRad(f.x.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+f.x.maxLabel.height+this.plotHeight+2*d,g)),f.x2.options.title&&f.x2.used&&(g.textAlign=f.x2.options.titleAlign||"center",g.textBaseline="bottom",g.angle=Flotr.toRad(f.x2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-f.x2.maxLabel.height-2*d,g)),f.y.options.title&&f.y.used&&(g.textAlign=f.y.options.titleAlign||"right",g.textBaseline="middle",g.angle=Flotr.toRad(f.y.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y.options.title,this.plotOffset.left-f.y.maxLabel.width-2*d,this.plotOffset.top+this.plotHeight/2,g)),f.y2.options.title&&f.y2.used&&(g.textAlign=f.y2.options.titleAlign||"left",g.textBaseline="middle",g.angle=Flotr.toRad(f.y2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y2.options.title,this.plotOffset.left+this.plotWidth+f.y2.maxLabel.width+2*d,this.plotOffset.top+this.plotHeight/2,g))}else{b=[],c.title&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',c.title,"</div>"),c.subtitle&&b.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',c.subtitle,"</div>"),b.push("</div>"),b.push('<div class="flotr-axis-title" style="font-weight:bold;">'),f.x.options.title&&f.x.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+c.grid.labelMargin+f.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",f.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',f.x.options.title,"</div>"),f.x2.options.title&&f.x2.used&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",f.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',f.x2.options.title,"</div>"),f.y.options.title&&f.y.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,"px;left:0;text-align:",f.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',f.y.options.title,"</div>"),f.y2.options.title&&f.y2.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,"px;right:0;text-align:",f.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',f.y2.options.title,"</div>"),b=b.join("");
var h=a.create("div");a.setStyles({color:c.grid.color}),h.className="flotr-titles",a.insert(this.el,h),a.insert(h,b)}}})}(),"undefined"==typeof room&&(room={}),"undefined"==typeof room.utils&&(room.utils={}),$(function(){"use strict";function a(){return!document[e]}function b(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function c(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}var d=function(){var a="hidden",b=["webkit","moz","ms"];if(a in document)return"";a="Hidden";for(var c=0;c<b.length;c++)if(b+a in document)return b;return""}(),e=d?d+"Hidden":"hidden",f=d+"visibilitychange",g={log:function(){}},h={maxRetry:5,authCommand:"room.auth",authError:null,retryInterval:1e3,noopCommand:"noop",logger:g};c()&&(f="pageshow"),room.Connection=function(c){function d(a){if(t.log("request",a),!p())return void((z||A<c.maxRetry)&&(n(function(){d(a)}),z||(C=q())));c.onRequest&&c.onRequest(a.command,a.data);var b=(new Date).getTime(),e=++u;v[e]=b,a.success&&(w[e]=a.success),a.error&&(x[e]=a.error);var f={id:e,command:a.command,data:a.data};return a.log&&(f.log=a.log),C.send(JSON.stringify(f)),s}function e(a,b,c){return b&&(w[a]=b),c&&(x[a]=c),s}function g(a){return delete w[a],delete x[a],s}function i(a){function b(a){t.log("authError",c.url),A=c.maxRetry,c.authError&&c.authError(a)}z=!1,t.log("onOpen",c.url),c.onOpen&&c.onOpen(a),A=0,c.authToken&&d({command:c.authCommand,data:c.authToken,success:function(a){c.authToken=a},error:b});for(var e=0;e<y.length;e++)y[e]();y=[]}function j(a){t.log("receive",a.data),c.onMessage&&c.onMessage(a);var b=JSON.parse(a.data),d=v[b.id],e=null;d&&delete v[b.id],"error"==b.type?b.id&&x[b.id]?e=x[b.id]:b.command&&x[b.command]?e=x[b.command]:c.onServerError&&(e=c.onServerError):b.id&&w[b.id]?e=w[b.id]:b.command&&w[b.command]&&(e=w[b.command]),b.id&&(delete w[b.id],delete x[b.id]),e?e(b.data):"error"!=b.type&&t.log("UnknownMessage",a.data)}function k(d){function e(){return b()&&!a()?!1:A<c.maxRetry}t.log("close",c.url),c.onClose&&c.onClose(d),e()?(setTimeout(function(){p()||(C=q())},A*c.retryInterval),A++):B&&(clearInterval(B),B=0)}function l(a){c.onSocketError&&c.onSocketError(a)}function m(a,b){return setInterval(function(){p()&&d($.extend(!0,{},b))},a)}function n(a){p()?a():y.push(a)}function o(){p()&&(A=c.maxRetry,C.close())}function p(){return 1==C.readyState}function q(){z=!0;var a=new WebSocket(c.url);return a.onopen=i,a.onmessage=j,a.onerror=l,a.onclose=k,a}function r(b,c,e){return B&&clearInterval(B),B=setInterval(function(){p()&&(c||a())&&d({command:e||"noop"})},1e3*b)}"string"==typeof c&&(c={url:c}),c=$.extend({},h,c);var s=this,t=c.logger,u=0,v={},w={},x={},y=[],z=!1,A=0,B=0,C=q();$(window).on("beforeunload",o),$(document).on(f,function(){var b=a();t.log(f,"visible="+b),b&&!p()&&(C=q())}),c.noopCommand&&e(c.noopCommand,function(){}),$.extend(this,{request:d,addEventListener:e,removeEventListener:g,on:e,off:g,polling:m,ready:n,close:o,isConnected:p,sendNoop:r,onOpen:function(a){return c.onOpen=a,this},onClose:function(a){return c.onClose=a,this},onRequest:function(a){return c.onRequest=a,this},onMessage:function(a){return c.onMessage=a,this},onSocketError:function(a){return c.onSocketError=a,this},onServerError:function(a){return c.onServerError=a,this}})},$.extend(room.utils,{isIOS:c,isMobile:b,isDocumentVisible:a})}),"undefined"==typeof room&&(room={}),$(function(){room.Cache=function(a,b){function c(c){if(a)try{return a.getItem(c)}catch(d){b&&console&&console.log(d)}return null}function d(a){var b=c(a);return b&&(b=JSON.parse(b)),b}function e(c,d){if(a){"object"==typeof d&&(d=JSON.stringify(d));try{a.setItem(c,d)}catch(e){b&&console&&console.log(e)}}}function f(c){if(a)try{a.removeItem(c)}catch(d){b&&console&&console.log(d)}}function g(){var c=[];if(a)try{for(var d=0;d<a.length;d++)c.push(a.key(d))}catch(e){b&&console&&console.log(e)}return c}function h(){try{return sotrage?a.length:0}catch(c){b&&console&&console.log(c)}}function i(){if(a)try{a.clear()}catch(c){b&&console&&console.log(c)}}$.extend(this,{get:c,getAsJson:d,put:e,remove:f,size:h,clear:i,keys:g})}}),"undefined"==typeof room&&(room={}),"undefined"==typeof room.logger&&(room.logger={}),"undefined"==typeof room.utils&&(room.utils={}),$(function(){function a(b){var c=typeof b;if("object"!==c)return b;if($.isArray(b)){for(var d=[],e=0;e<b.length;e++)c=typeof b[e],d.push("function"===c?"(function)":"object"===c?a(b[e]):b[e]);return d}var f={};for(var g in b)c=typeof g,f[g]="function"===c?"(function)":"object"===c?a(b[g]):b[g];return f}room.logger.WsLogger=function(b,c){var d=new room.Connection(b);c=c||"log",this.log=function(){d.request({command:c,data:a(arguments)})}},room.logger.DivLogger=function(b){this.log=function(){for(var c=[],d=0;d<arguments.length;d++)c.push("object"==typeof arguments[d]?a(arguments[d]):arguments[d]);$("<p/>").text(JSON.stringify(c)).prependTo(b)}},room.logger.nullLogger={log:function(){}},$.extend(room.utils,{stripFunc:a})}),function(a){function b(){return!!a.fn.tooltip}function c(a,b){var c=b.back,d=b.fore,f=b.pattern;if(b.styleRef){var g=a.styles[b.styleRef].split("|");c=g[0],d=g[1],f=g[2]}d&&(e.fillStyle=d,e.fillRect(b.p[0],b.p[1],b.p[2],b.p[3]))}function d(a){var b=a.kind?a.kind:1,c=1,d=a.p[0],o=a.p[1],p=a.p[2],q=a.p[3],r=o==q;if(b==f||b==l||b==m||b==n?c=2:b==i&&(c=3),e.lineWidth=c,1==c||3==c?r?(o=0==o?.5:o-.5,q=0==q?.5:q-.5):(d=0==d?.5:d-.5,p=0==p?.5:p-.5):r&&0==o?(o=1,q=1):r||0!=d||(d=1,p=1),e.strokeStyle=a.color?a.color:"#000000",b==j)e.beginPath(),r?(e.moveTo(d,o-1),e.lineTo(p,q-1),e.moveTo(d,o+1),e.lineTo(p,q+1)):(e.moveTo(d-1,o),e.lineTo(p-1,q),e.moveTo(d+1,o),e.lineTo(p+1,q)),e.stroke(),e.closePath();else if(b==g||b==h||b==k||b==l){var s,t;switch(b){case g:s=4,t=2;break;case h:s=2,t=2;break;case k:s=1,t=1;break;case l:s=8,t=3}var u=!0;if(e.beginPath(),e.moveTo(d,o),r)for(var v=o,w=d,x=p;x>w;){var y=u?s:t;w+=y,w>x&&(w=x),u?e.lineTo(w,v):e.moveTo(w,v),u=!u}else for(var z=d,A=o,B=q;B>A;){var C=u?s:t;A+=C,A>B&&(A=B),u?e.lineTo(z,A):e.moveTo(z,A),u=!u}e.stroke(),e.closePath()}else e.beginPath(),e.moveTo(d,o),e.lineTo(p,q),e.stroke(),e.closePath()}var e,f=2,g=3,h=4,i=5,j=6,k=7,l=8,m=10,n=12;a.fn.excelToCanvas=function(f,g){var h,i;if("canvas"==this[0].tagName?(i=this,h=i.parent()):(h=this,i=h.find("canvas"),0==i.length&&(i=a("<canvas style='position:absolute;left:0;top:0;z-index:0'></canavas>").appendTo(h))),"undefined"!=typeof FlashCanvas&&FlashCanvas.initElement(i[0]),i.attr("width",f.width).attr("height",f.height),h.css({width:f.width,height:f.height}),e=i[0].getContext("2d"),e.fillStyle="white",e.fillRect(0,0,f.width,f.height),f.font&&(e.font=f.font),f.fills)for(var j=0;j<f.fills.length;j++){var k=f.fills[j];c(f,k)}if(f.lines)for(var j=0;j<f.lines.length;j++){var l=f.lines[j];d(l)}if(f.strs)for(var j=0;j<f.strs.length;j++){var m=f.strs[j],n=m.style?m.style:f.styles[m.styleRef],o=a("<span style='"+n+"'></span>");if(m.link){var p=a("<a target='_blank'></a>");p.append(m.text),p.attr("href",m.link),o.append(p)}else o.append(m.text);var q=m.align;if(q&&(o.addClass("cell-a"+q[0]),o.addClass("cell-v"+q[1]),"c"==q[1]||"j"==q[1])){var r=m.text.split("<br>").length;r>1&&o.css("margin-top","-"+r/2+"em")}m.rawdata&&o.attr("data-raw",m.rawdata);var s=a("<div id='"+m.id+"' class='cell'></div>").append(o);s.css({left:m.p[0],top:m.p[1],width:m.p[2],height:m.p[3]}),m.clazz&&s.addClass(m.clazz),m.dataAttrs&&a.each(m.dataAttrs,function(a,b){s.attr("data-"+a,b)}),m.comment&&b()&&(e.strokeStyle="red",e.fillStyle="red",e.beginPath(),e.moveTo(m.p[0]+m.commentWidth-4,m.p[1]),e.lineTo(m.p[0]+m.commentWidth,m.p[1]),e.lineTo(m.p[0]+m.commentWidth,m.p[1]+4),e.lineTo(m.p[0]+m.commentWidth-4,m.p[1]),e.stroke(),e.fill(),e.closePath(),s.tooltip({title:m.comment,html:!0})),h.append(s)}if(f.pictures)for(var j=0;j<f.pictures.length;j++){var t=f.pictures[j],u=a("<img class='excel-img'/>");u.attr("src",t.uri),u.css({left:t.p[0],top:t.p[1],width:t.p[2],height:t.p[3]}),h.append(u)}if(f.charts&&a.fn.excelToChart)for(var j=0;j<f.charts.length;j++){var v=f.charts[j],w={},x=a("<div class='excel-chart'></div>");x.css({left:v.p[0],top:v.p[1],width:v.p[2],height:v.p[3]}),h.append(x),f.font&&(w.HtmlText=!0),x.excelToChart(v.chart,w),x.css("position","absolute")}if(g)for(var y in g){var s=a("#"+y);if(s.length>0){var z=g[y];if("string"==typeof z)s.find("span").text(z);else if(z.element){var A=a(document.createElement(z.element));for(attr in z)"element"!=attr&&A.attr(attr,z[attr]);s.css("overflow","visible").empty().append(A)}}}return this}}(jQuery),function(a){if("object"==typeof Flotr){var b={HtmlText:!1};a.fn.excelToChart=function(c,d){function e(){var b=c.type,d=c.option,e={};switch(b){case"PIE":e={HtmlText:f.HtmlText,grid:{verticalLines:!1,horizontalLines:!1},xaxis:{showLabels:!1},yaxis:{showLabels:!1},pie:{show:!0,fill:!0,fillColor:null,fillOpacity:.5,explode:0,startAngle:.75},legend:{position:"se",backgroundColor:"#D2E8FF"}};break;case"BAR":var g=d.bars.horizontal;e={HtmlText:f.HtmlText,bars:{show:!0,horizontal:!1,shadowSize:0,barWidth:.5},xaxis:{min:0},yaxis:{min:0},grid:{verticalLines:g,horizontalLines:!g},legend:{position:g?"se":"nw",backgroundColor:"#D2E8FF"}};break;case"LINE":e={HtmlText:f.HtmlText,xaxis:{min:0,max:c.labels.length+1},yaxis:{min:0},legend:{position:"nw",backgroundColor:"#D2E8FF"}};break;case"RADAR":e={HtmlText:f.HtmlText,radar:{show:!0,fill:!1},grid:{circular:!0,minorHorizontalLines:!0,tickColor:"#999999"},xaxis:{},yaxis:{min:0,minorTickFreq:2},legend:{position:"nw",backgroundColor:"#D2E8FF"}};break;case"BUBBLE":e={HtmlText:f.HtmlText,bubbles:{show:!0},xaxis:{min:0},yaxis:{min:0},legend:{position:"nw",backgroundColor:"#D2E8FF"}}}if(c.labels&&c.labels.length){for(var h=[],i=c.data.length+1,j=0;j<c.labels.length;j++){var k=j+1;"BAR"==b&&0==d.bars.stacked&&(k=j*i+i/2);var l=[k,c.labels[j]];h.push(l)}g?e.yaxis.ticks=h:e.xaxis.ticks=h}return a.extend(!0,e,d)}var f=a.extend({},b);d&&a.extend(f,d);var g=c.data,h=e(c);Flotr.draw(a(this)[0],g,h)}}}(jQuery),"undefined"==typeof flect&&(flect={}),function(a){"use strict";function b(b){for(var c=0;c<b.length;c++){var d=b[c],e=r[d.name];e||(e=d.name),d.text=e,this[d.name]=d}a.extend(this,{fromName:function(a){for(var c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null}})}function c(b){if(!b)return!1;var c=b.constructor.name;return c?"FormData"===c:!a.isPlainObject(b)}function d(b){return a.isNumeric(b.replace(/,/g,""))}function e(){s.debug&&console.log.apply(console,arguments)}function f(a,b){return a.baseUrl+"/"+a.contextUrl+b}function g(a,b){a.headers={"X-Auth-Token":b}}function h(b,c){function d(){e.hide(),f.unbind("change blur",d)}var e=null,f=a(this);switch(b){case"prompt":e=new j(c.title,c.text,!1),f.bind("change blur",d);break;case"error":e=new j(c.title,c.text,!0),f.addClass("exrep-error"),f.change(d);break;case"modified":f.removeClass("exrep-error")}e&&e.show(f)}function i(b){function c(a){return a.match(/[A-Z]+/)[0]}function d(a,b){var d=a.indexOf(":");if(-1==d)return b==a;var e=a.substring(0,d),f=a.substring(d+1),g=c(e),h=parseInt(e.substring(g.length)),i=c(f),j=parseInt(f.substring(i.length)),k=c(b),l=parseInt(b.substring(k.length));return k>=g&&i>=k&&l>=h&&j>=l}function e(c,e){var f=null,g=null;return a.each(b,function(a,b){return a==c?(f=b,!1):!0}),f&&a.each(f,function(a,b){for(var c=0;c<b.regions.length;c++)if(d(b.regions[c],e))return g=b,!1;return!0}),g}function f(b,c){var d=e(b,c),f=null;if(!d)return null;if(d.vt===o){var h=a("<select><option value=''></option></select>");return a.each(d.list,function(b,c){var d=a("<option/>");d.attr("value",c),d.text(c),h.append(d)}),h}return g(d)?(f=a("<input type='number'/>"),f.css("text-align","right"),f):d.vt===p?(f=a("<input type='date'/>"),f.css("text-align","right"),f):d.vt===q?(f=a("<input type='time'/>"),f.css("text-align","right"),f):null}function g(a){return a.vt==m||a.vt==n}function h(){var b=a(this),c=b.attr("name"),d=b.parent("div").attr("id"),f=e(c,d);f&&f.prompt&&s.onRule.call(this,"prompt",f.prompt)}a.extend(this,{rules:b,buildInput:f,onFocus:h})}function j(b,c,d){function e(a){var c=a.parent("div"),e=c.position(),f=e.top,h=e.left+20;d?f+=a.height()+10:f-=b?60:35,g.appendTo(c.parent()).css({top:f,left:h}).show()}function f(){g.hide()}var g=d?v:u,h=null,i=a("<div class='exrep-popup-content'/>");g.empty(),b&&(h=a("<div class='exrep-popup-title'/>"),h.text(b),g.append(h),d&&a("<div class='exrep-popup-close'>×</div>").appendTo(h).click(f)),i.text(c),g.append(i),a.extend(this,{show:e,hide:f})}function k(b,c){function d(){if(0===b.find("button").length){var d=c.top,e=c.left;"center"==d&&(d=(a(window).height()-c.height)/2),"center"==e&&(e=(a(window).width()-c.width)/2),b.empty().css({display:"none",position:"fixed",top:d,left:e,width:c.width,height:c.height,border:"solid 1px #000000","background-color":"#F0F0F0","text-align":"center","z-index":1e3}).append("<div style='margin:10px 0'><img src='"+c.baseUrl+"/assets/images/loading.gif'/></div><div style='margin:10px 0'><span>"+t.Prepared.text+"...</span></div><div style='margin-right:10px;text-align:right'><button class='btn btn-warning'>"+r.Cancel+"</button></div><form action='#' method='post'></form>")}j=b.find("span"),k=b.find("form"),l=b.find("button"),l.unbind("click")}function e(){b.show()}function g(){b.hide()}function h(a){j.text(a)}function i(a){k.attr("action",f(c,"/finish/"+a)).submit()}var j,k,l;d(),a.extend(this,{show:e,close:g,text:h,download:i,cancelButton:l})}function l(b,d,e){function h(){var b="excelReport-download-dialog",c=a("#"+b);0===c.length&&(c=a("<div/>"),c.attr("id",b),a("body").append(c)),o=new k(c,e),o.cancelButton.click(l)}function i(h){n=null,m=!1;var i={url:f(e,"/prepare/"+b+"/"+d),type:"POST",data:h,success:function(a){var b=t.fromName(a.status);b==t.Error?e.error(a.msg):b==t.Prepared?(n=a.ticket,e.showLoading&&o.show(),setTimeout(j,5e3)):(console.log("Unknown data",a),e.error(JSON.stringify(a)))},error:function(a,b,c){e.error(b+", "+c)}};e.apikey&&g(i,e.apikey),c(h)&&(i.processData=!1,i.contentType=!1),a.ajax(i)}function j(){n&&!m&&a.ajax({url:f(e,"/status/"+n),type:"GET",success:function(a){var b=t.fromName(a.status);b==t.Prepared||b==t.Processing?(o.text(b.text+"..."),setTimeout(j,1e3)):b==t.Finished?(o.close(),o.download(n)):b==t.Error?(o.close(),e.error(a.msg)):b==t.Canceled?o.close():(console.log("Unknown data",a),e.error(JSON.stringify(a)))},error:function(a,b,c){e.error(b+", "+c)}})}function l(){n&&!m&&(m=!0,a.ajax({url:f(e,"/cancel/"+n),type:"GET",success:function(a){console.log("Cancel: "+a)},error:function(a,b,c){e.error(b+", "+c)}}),o.close())}e=a.extend(s,e||{});var m=!1,n=null,o=null;h(),a.extend(this,{prepare:i})}var m=1,n=2,o=3,p=4,q=5,r={Prepared:"Preparing",Processing:"Processing",Finished:"Finished",Error:"Error",Canceled:"Canceled",Cancel:"Cancel"},s={baseUrl:"",contextUrl:"download",showLoading:!0,width:320,height:120,top:"center",left:"center",debug:!1,error:function(a){alert(a)},onRule:h};flect.excelreport&&flect.excelreport.MSG&&(r=a.extend(r,flect.excelreport.MSG));var t=new b([{name:"Prepared"},{name:"Processing"},{name:"Finished"},{name:"Error"},{name:"Canceled"}]),u=a("<div class='exrep-popup' style='display:none;'/>"),v=a("<div class='exrep-popup exrep-popup-error' style='display:none;'/>");flect.ExcelReport=function(b,f,h,j,k,l){function m(){var a="excelreport-"+h+"-"+j;return k&&(a+="-"+k),a}function n(a){var b=a.attr("data-name"),c=a.prev("div:eq(0)"),d=a.next("div:eq(0)");return c.attr("data-name")==b||d.attr("data-name")==b}function o(){function c(b){var c=a("<span style='display:none;'/>"),d=0;return c.text(b.text()),b.parent().append(c),d=c.width(),c.remove(),d}e("ExcelReport.buildForm"),b.find(".namedCell").each(function(){var b=a(this),d=b.find("span"),e=b.attr("id"),f=b.attr("data-name"),g=d.text(),h=!!b.attr("data-formula");if(!h){var i=l.buildInput?l.buildInput(f,e):null,j=b.innerHeight(),k=b.innerWidth();if(null===i&&D&&(i=D.buildInput(f,e)),null===i&&(j>40?i=a("<textarea></textarea>"):(i=a("<input type='text'/>"),d.hasClass("cell-ar")?i.css("text-align","right"):d.hasClass("cell-ac")&&i.css("text-align","center"))),"string"!=typeof i){if(g)if(n(b))i.val(g),d.remove();else{var m=c(d);k-=m+4,d.css("width",m+8+"px"),i.css("margin-left",m+8+"px")}else d.remove();i.css({width:k-8+"px",height:j-2+"px"}),i.addClass("exrep-input"),i.attr("name",f),D&&i.focus(D.onFocus)}b.append(i)}}),A&&b.find(":input").change(function(){var b=a(this),c=b.parent("div"),d=c.attr("id"),e=b.attr("name"),f=b.val();A.request({command:"modified",data:{id:d,name:e,value:f},success:function(a){"OK"==a?s.onRule.call(b[0],"modified",f):s.onRule.call(b[0],"error",a)}})}),v()}function p(){function c(){var b="",c=s.lang||a("html").attr("lang")||"";return f?0===f.indexOf("https:")?b="wss"+f.substring(5):0===f.indexOf("http:")?b="ws"+f.substring(4):0===f.indexOf("//")?b=("https:"==location.protocol?"wss":"ws")+":"+f:s.error("Invalid baseUrl: "+f):b=("https:"==location.protocol?"wss":"ws")+"://"+location.host,b+="/liveform/"+h+"/"+j,c&&(b+="?language="+c),b}console.log("openConnection: "),e("ExcelReport.openConnection");var g={url:c()},k=null===A;s.debug&&(g.logger=console),A=new room.Connection(g),a(window).off("beforeunload",A.close),A.on("calced",function(b){a.each(b,function(b,c){var e=a("#"+b+" span");e.empty().append(c),d(c)&&!e.hasClass("cell-ac")&&e.removeClass("cell-al").addClass("cell-ar")})}),A.on("chart",function(c){if(a.fn.excelToChart){var d=c.chart,e=b.find(".excel-chart").eq(c.index);e.excelToChart(d),e.css("position","absolute")}}),A.onOpen(function(){if(console.log("onOpen: "+k),k)A.request({command:"available",data:{rules:null===D},success:function(a){a.error?(alert(a.error),A.close(),A=null):(B=a.license,D||(D=new i(a.rules)),l.form&&o())}}),k=!1;else{var a=b.excelReport("data");console.log("reconnect: ",a),b.excelReport("update",a)}}),A.sendNoop(30,!room.utils.isMobile())}function q(b){e("ExcelReport.getInfo"),a.ajax({url:f+"/report/info/"+h+"/"+j,success:b})}function r(b){e("ExcelReport.show");var c=b&&!a.isEmptyObject(b);if(l.cache&&!c){var d=y.getAsJson(m());if(d)return void q(function(a){return z=a.lastModified,a.lastModified==d.lastModified&&(d.rules&&(D=new i(d.rules)),d.json)?(C=d.json,void u(C)):void t(b,c)})}t(b,c)}function t(d,i){e("ExcelReport.loadJson");var m={url:f+"/report/json/"+h+"/"+j,type:"POST",data:d,success:function(a,c,d){var e=d.getResponseHeader("content-type")||"json";-1!=e.indexOf("json")?(i||(C=a),u(a)):-1!=e.indexOf("html")&&b.html(a)}};k&&(m.url+="/"+k),c(d)&&(m.processData=!1,m.contentType=!1),l.apikey&&g(m,l.apikey),a.ajax(m)}function u(a){e("ExcelReport.showJson"),b.excelToCanvas(a),l.live?p():l.form?o():v()}function v(){if(e("ExcelReport.finish"),"Free"==B){var c=a("<img/>");c.attr("src",f+"/assets/images/PoweredByExcelReport.png"),c.css({position:"absolute",right:0,bottom:0,"z-index":1e3}),c.addClass("exrep-logo"),b.append(c)}if(l.complete&&l.complete(b),l.cache&&(C||D)){var d={};C&&(d.json=C),D&&(d.rules=D.rules),z?(d.lastModified=z,y.put(m(),d)):q(function(a){d.lastModified=a.lastModified,y.put(m(),d)})}}function w(){e("ExcelReport.release"),A&&A.close(),y=null,z=null,A=null,B=null,C=null,D=null}function x(a){A&&A.request(a)}e("ExcelReport.init",h,j,k);var y=new room.Cache(localStorage),z=null,A=null,B=null,C=null,D=null;a.extend(this,{show:r,request:x,release:w})},a.fn.excelReport=function(b,c,e){function f(b,c){var d={};return a.each(c,function(c,e){var f=b.find("#"+c);if(f.length)d[c]=e;else if(f=b.find("[data-name="+c+"]"),f.length)if(a.isArray(e)){var g=0;f.each(function(){var b=a(this),c=b.attr("id"),f=b.attr("data-formula");return f||(d[c]=e[g++]),g<e.length})}else{var h=a(f.get(0)).attr("id");d[h]=e}}),d}function g(b,c){var d=c.baseUrl||s.baseUrl,e=c.user,f=c.template,g=c.sheet,h=c.data,i=b.css("position"),j=a.data(b.get(0),"report"),k={apikey:c.apikey,form:c.form,live:c.live,cache:c.cache,complete:c.complete,buildInput:c.buildInput};"static"===i&&b.css("position","relative"),j&&(j.release(),a.removeData(b.get(0),"report")),j=new flect.ExcelReport(b,d,e,f,g,k),j.show(h),a.data(b.get(0),"report",j)}function h(b,c){var d={};if(b.find(":input").each(function(){var b=a(this),c=b.attr("name"),e=b.val(),f=d[c],g=typeof f;if("undefined"===g)d[c]=e;else if("string"===g){var h=[];h.push(f),h.push(e),d[c]=h}else f.push(e)}),!c){var e=[];for(var f in d){var g=d[f];if(a.isArray(g)){for(;g.length>0&&!g[g.length-1];)g.pop();0===g.length&&e.push(f)}else g||e.push(f)}for(var h=0;h<e.length;h++)delete d[e[h]]}return d}function i(b,c,e){var g=c,h=a.data(b.get(0),"report");"string"==typeof c&&"undefined"!=typeof e&&(g={},g[c]=e),g=f(b,g),a.each(g,function(a,c){var e=b.find("#"+a);if(e.length){var f=e.find(":input");if(f.length)f.val(c);else{var g=e.find("span");g.text(c),d(""+c)&&!g.hasClass("cell-ac")&&g.removeClass("cell-al").addClass("cell-ar")}}}),h&&h.request({command:"updateCells",data:g})}function j(b,c,d){var e="form"==b[0].tagName.toLowerCase(),f=e?new FormData(b[0]):h(b),g=a.extend({},d);g.data=f,a.excelReport(c,g)}switch("object"==typeof b&&(c=b,b="show"),b){case"show":case"showExcel":return g(this,c),this;case"data":return h(this,!!c);case"update":case"updateCells":return i(this,c,e),this;case"pdf":case"downloadPdf":j(this,b,c);break;case"excel":case"downloadExcel":j(this,b,c);break;default:throw"Unknown method: "+b}},a.excelReport=function(b,d){function e(b){"string"==typeof b&&(b={baseUrl:b}),b.msg&&(a.extend(r,b.msg),delete b.msg),a.extend(s,b)}function f(b,d){function e(a,b){c(h)?h.append(a,b):h[a]=b}var f=b.user,g=b.template,h=b.data,i=a.extend({},b);delete i.user,delete i.template,delete i.data,i.baseUrl||(i.baseUrl=s.baseUrl),d&&i.pdf&&(a.each(i.pdf,function(a,b){e("pdf."+a,b)}),delete i.pdf),i.filename&&(e("filename",i.filename),delete i.filename),i.contextUrl=d?"pdf":"download",new l(f,g,i).prepare(h)}switch("object"==typeof b&&(d=b,b="configure"),b){case"configure":e(d);break;case"pdf":case"downloadPdf":f(d,!0);break;case"excel":case"downloadExcel":f(d,!1);break;default:throw"Unknown method: "+b}}}(jQuery);